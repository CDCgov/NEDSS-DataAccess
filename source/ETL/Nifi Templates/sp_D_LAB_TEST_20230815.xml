<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<template encoding-version="1.3">
    <description></description>
    <groupId>b30d6529-0185-1000-75c6-bde3c44d1248</groupId>
    <name>sp_D_LAB_TEST_20230815</name>
    <snippet>
        <controllerServices>
            <id>97d7b5ba-44fb-398d-0000-000000000000</id>
            <parentGroupId>d38e7f6d-72d3-37d5-0000-000000000000</parentGroupId>
            <versionedComponentId>97d7b5ba-44fb-398d-aa9b-f40efddd4408</versionedComponentId>
            <bulletinLevel>WARN</bulletinLevel>
            <bundle>
                <artifact>nifi-dbcp-service-nar</artifact>
                <group>org.apache.nifi</group>
                <version>1.18.0</version>
            </bundle>
            <comments></comments>
            <descriptors>
                <entry>
                    <key>Database Connection URL</key>
                    <value>
                        <name>Database Connection URL</name>
                    </value>
                </entry>
                <entry>
                    <key>Database Driver Class Name</key>
                    <value>
                        <name>Database Driver Class Name</name>
                    </value>
                </entry>
                <entry>
                    <key>database-driver-locations</key>
                    <value>
                        <name>database-driver-locations</name>
                    </value>
                </entry>
                <entry>
                    <key>kerberos-user-service</key>
                    <value>
                        <identifiesControllerService>org.apache.nifi.kerberos.KerberosUserService</identifiesControllerService>
                        <name>kerberos-user-service</name>
                    </value>
                </entry>
                <entry>
                    <key>kerberos-credentials-service</key>
                    <value>
                        <identifiesControllerService>org.apache.nifi.kerberos.KerberosCredentialsService</identifiesControllerService>
                        <name>kerberos-credentials-service</name>
                    </value>
                </entry>
                <entry>
                    <key>kerberos-principal</key>
                    <value>
                        <name>kerberos-principal</name>
                    </value>
                </entry>
                <entry>
                    <key>kerberos-password</key>
                    <value>
                        <name>kerberos-password</name>
                    </value>
                </entry>
                <entry>
                    <key>Database User</key>
                    <value>
                        <name>Database User</name>
                    </value>
                </entry>
                <entry>
                    <key>Password</key>
                    <value>
                        <name>Password</name>
                    </value>
                </entry>
                <entry>
                    <key>Max Wait Time</key>
                    <value>
                        <name>Max Wait Time</name>
                    </value>
                </entry>
                <entry>
                    <key>Max Total Connections</key>
                    <value>
                        <name>Max Total Connections</name>
                    </value>
                </entry>
                <entry>
                    <key>Validation-query</key>
                    <value>
                        <name>Validation-query</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-min-idle-conns</key>
                    <value>
                        <name>dbcp-min-idle-conns</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-max-idle-conns</key>
                    <value>
                        <name>dbcp-max-idle-conns</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-max-conn-lifetime</key>
                    <value>
                        <name>dbcp-max-conn-lifetime</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-time-between-eviction-runs</key>
                    <value>
                        <name>dbcp-time-between-eviction-runs</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-min-evictable-idle-time</key>
                    <value>
                        <name>dbcp-min-evictable-idle-time</name>
                    </value>
                </entry>
                <entry>
                    <key>dbcp-soft-min-evictable-idle-time</key>
                    <value>
                        <name>dbcp-soft-min-evictable-idle-time</name>
                    </value>
                </entry>
            </descriptors>
            <name>Alabama_Z_DB</name>
            <persistsState>false</persistsState>
            <properties>
                <entry>
                    <key>Database Connection URL</key>
                    <value>jdbc:sqlserver://cdc-nbs-alabama-rds-mssql.czya31goozkz.us-east-1.rds.amazonaws.com:1433;integratedSecurity=false;encrypt=false;databaseName=Z;user=admin;password=hW61W1Z5!xX1;authenticationScheme=nativeAuthentication;</value>
                </entry>
                <entry>
                    <key>Database Driver Class Name</key>
                    <value>com.microsoft.sqlserver.jdbc.SQLServerDriver</value>
                </entry>
                <entry>
                    <key>database-driver-locations</key>
                    <value>/Users/RakheshKasagani/Downloads/sqljdbc_12.2/enu//mssql-jdbc-12.2.0.jre11.jar</value>
                </entry>
                <entry>
                    <key>kerberos-user-service</key>
                </entry>
                <entry>
                    <key>kerberos-credentials-service</key>
                </entry>
                <entry>
                    <key>kerberos-principal</key>
                </entry>
                <entry>
                    <key>kerberos-password</key>
                </entry>
                <entry>
                    <key>Database User</key>
                </entry>
                <entry>
                    <key>Password</key>
                </entry>
                <entry>
                    <key>Max Wait Time</key>
                    <value>500 millis</value>
                </entry>
                <entry>
                    <key>Max Total Connections</key>
                    <value>8</value>
                </entry>
                <entry>
                    <key>Validation-query</key>
                </entry>
                <entry>
                    <key>dbcp-min-idle-conns</key>
                    <value>0</value>
                </entry>
                <entry>
                    <key>dbcp-max-idle-conns</key>
                    <value>8</value>
                </entry>
                <entry>
                    <key>dbcp-max-conn-lifetime</key>
                    <value>-1</value>
                </entry>
                <entry>
                    <key>dbcp-time-between-eviction-runs</key>
                    <value>-1</value>
                </entry>
                <entry>
                    <key>dbcp-min-evictable-idle-time</key>
                    <value>30 mins</value>
                </entry>
                <entry>
                    <key>dbcp-soft-min-evictable-idle-time</key>
                    <value>-1</value>
                </entry>
            </properties>
            <state>ENABLED</state>
            <type>org.apache.nifi.dbcp.DBCPConnectionPool</type>
        </controllerServices>
        <processGroups>
            <id>94a4db51-5024-387a-0000-000000000000</id>
            <parentGroupId>d38e7f6d-72d3-37d5-0000-000000000000</parentGroupId>
            <position>
                <x>0.0</x>
                <y>0.0</y>
            </position>
            <comments>Enhanced version
- consider parallel executions</comments>
            <contents>
                <connections>
                    <id>112e1685-343c-33cd-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>78b35199-3b6f-3800-a43d-112d9497b63e</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>38a55cbe-d117-345e-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>4bc61d9c-cc1c-33bd-9e97-5adb3f6969a3</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>failure</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>5d10842e-86dd-328a-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>514acc64-079d-32bb-b7bd-2c36119ad6f2</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>18bb31a9-09b7-3227-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>02f068c6-94e9-3d89-9d0e-17eebbddb9e0</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
                        <id>bd15b121-c0be-31b8-0000-000000000000</id>
                        <type>INPUT_PORT</type>
                        <versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
                        <id>f7f6f022-dcba-3f64-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                        <versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>373c4836-95cf-3f8a-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>c05e05db-ab5e-318b-8318-802378a76377</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
                        <id>64fec237-74cd-38eb-0000-000000000000</id>
                        <type>INPUT_PORT</type>
                        <versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>051e0a73-c7c1-3bbc-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>f60c1a4b-563a-3842-9d07-383d1ff831f6</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>4d410ad5-f732-3673-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>dfccf974-b29b-37e7-8755-0d90c3a82706</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>c8c0c9b2-11ab-3171-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>63c7f51c-324d-3ee9-9503-4b90c7c6624b</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
                        <id>4e334a72-d7cf-398f-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                        <versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>67c4ab30-7a28-3ceb-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>8569b96f-b0a9-3a0f-9999-3dbe00626629</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>b5211881-83cb-3b8f-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>458dd9e5-c3bf-3f73-84b9-89aec98ce9ac</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>5d10842e-86dd-328a-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>514acc64-079d-32bb-b7bd-2c36119ad6f2</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>6cd5f9a8-1a01-3a49-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>db74bd92-b492-3699-b8a5-3ca4405f8706</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>38a55cbe-d117-345e-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>4bc61d9c-cc1c-33bd-9e97-5adb3f6969a3</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>failure</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>2b3e4086-5d58-31e2-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>c0cc16bf-5930-3dc9-bf85-0eea2432984b</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>8a4b041d-b4e0-3e81-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>46db0bb1-2ee8-33c5-a2b8-8b842d1cff9c</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>38a55cbe-d117-345e-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>4bc61d9c-cc1c-33bd-9e97-5adb3f6969a3</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>failure</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>051e0a73-c7c1-3bbc-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>f60c1a4b-563a-3842-9d07-383d1ff831f6</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>9411f26e-cfcd-3c74-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>c27497b4-96d8-37ba-92e0-0a3a5ce12800</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>5d10842e-86dd-328a-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>514acc64-079d-32bb-b7bd-2c36119ad6f2</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <source>
                        <groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
                        <id>43c6d86c-5800-324c-0000-000000000000</id>
                        <type>OUTPUT_PORT</type>
                        <versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>c648aea9-0f10-393d-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>1fd1311c-3299-32e2-a50b-a350beaa8793</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>2b3e4086-5d58-31e2-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>c0cc16bf-5930-3dc9-bf85-0eea2432984b</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>c8c0c9b2-11ab-3171-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>63c7f51c-324d-3ee9-9503-4b90c7c6624b</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>cd20ff1d-f991-33a9-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>3c0807f5-5ff7-3266-b277-f99777ce4d2d</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>38a55cbe-d117-345e-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>4bc61d9c-cc1c-33bd-9e97-5adb3f6969a3</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>failure</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>c8c0c9b2-11ab-3171-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>63c7f51c-324d-3ee9-9503-4b90c7c6624b</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <connections>
                    <id>fa2c0a14-bc02-3d9c-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <versionedComponentId>24a3637f-ef2b-345d-9daf-f6917db4f7e0</versionedComponentId>
                    <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                    <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                    <destination>
                        <groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
                        <id>12aa01a0-d42f-3fe5-0000-000000000000</id>
                        <type>INPUT_PORT</type>
                        <versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                    </destination>
                    <flowFileExpiration>0 sec</flowFileExpiration>
                    <labelIndex>1</labelIndex>
                    <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                    <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                    <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                    <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                    <name></name>
                    <selectedRelationships>success</selectedRelationships>
                    <source>
                        <groupId>94a4db51-5024-387a-0000-000000000000</groupId>
                        <id>2b3e4086-5d58-31e2-0000-000000000000</id>
                        <type>PROCESSOR</type>
                        <versionedComponentId>c0cc16bf-5930-3dc9-bf85-0eea2432984b</versionedComponentId>
                    </source>
                    <zIndex>0</zIndex>
                </connections>
                <labels>
                    <id>00fb2d00-c75a-3caa-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>664.0</x>
                        <y>344.0</y>
                    </position>
                    <versionedComponentId>ae1a6e49-b882-3639-90fe-4aa95f9dacc7</versionedComponentId>
                    <height>40.0</height>
                    <label>Runs 3 queries in parallel</label>
                    <style>
                        <entry>
                            <key>font-size</key>
                            <value>12px</value>
                        </entry>
                    </style>
                    <width>304.0</width>
                    <zIndex>0</zIndex>
                </labels>
                <labels>
                    <id>0d9e4593-4d4c-3f35-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>664.0</x>
                        <y>48.0</y>
                    </position>
                    <versionedComponentId>18323aad-b029-3b33-8c05-4c5fb9d0ac26</versionedComponentId>
                    <height>40.0</height>
                    <label>Runs 9 queries in parallel</label>
                    <style>
                        <entry>
                            <key>font-size</key>
                            <value>12px</value>
                        </entry>
                    </style>
                    <width>304.0</width>
                    <zIndex>0</zIndex>
                </labels>
                <labels>
                    <id>1244f017-f7e3-3686-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>664.0</x>
                        <y>984.0</y>
                    </position>
                    <versionedComponentId>b0fe6799-5b9b-3c60-b844-42909e5fdaba</versionedComponentId>
                    <height>40.0</height>
                    <label>Runs all the processors in sequence</label>
                    <style>
                        <entry>
                            <key>font-size</key>
                            <value>12px</value>
                        </entry>
                    </style>
                    <width>304.0</width>
                    <zIndex>0</zIndex>
                </labels>
                <labels>
                    <id>2086b147-19aa-3520-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>0.0</x>
                        <y>-80.0</y>
                    </position>
                    <versionedComponentId>fd6b77c1-5a0e-3df2-ba65-7490c4e1c9c8</versionedComponentId>
                    <height>56.0</height>
                    <label>This job is a full load but for time-being, i am running for a smaller subset</label>
                    <style>
                        <entry>
                            <key>font-size</key>
                            <value>18px</value>
                        </entry>
                    </style>
                    <width>624.0</width>
                    <zIndex>0</zIndex>
                </labels>
                <processGroups>
                    <id>32cb37ac-bdfd-3d76-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>232.0</x>
                        <y>0.0</y>
                    </position>
                    <versionedComponentId>9f2f740e-c195-378b-8e0b-43958d5a938f</versionedComponentId>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>0070fdc4-9452-3dac-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>5aac2245-f6ed-3ca5-ae16-713e60ad6375</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>fe5103ef-3542-384e-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>092d9853-c6cc-3925-9479-c28402a2e0b6</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>11c875f6-f42e-3c77-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>1106cec4-34c5-3460-ace2-42840ba00016</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>fe5103ef-3542-384e-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>092d9853-c6cc-3925-9479-c28402a2e0b6</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>1781b434-855a-36af-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>b3e6b41f-8d3a-37e0-acdd-abe832812fb3</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>5316d551-7d07-3c4f-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>117b9632-9054-3c01-8a02-aba2286bbf47</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>21991035-6501-3658-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>b6381ce4-68d5-3e35-a462-60ed976d4a52</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>f7f6f022-dcba-3f64-0000-000000000000</id>
<type>OUTPUT_PORT</type>
<versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>merged</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>2d2b8395-d1b4-3c15-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>223aa86f-5b2a-3c67-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>035fff39-3184-3c49-bef1-66a6af56b011</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>aefba3a9-0b62-37ba-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>00f2cf42-4c7c-3d67-89c7-a5364265c82a</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>3b25011e-2b49-3aa1-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>bb7b119c-c270-354c-a63c-aa8eb0d171c8</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>aefba3a9-0b62-37ba-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>00f2cf42-4c7c-3d67-89c7-a5364265c82a</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>469da151-e6d5-3ccc-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>3bd67c5f-36de-3d2c-9170-942562d437dd</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>377e688f-103a-3b20-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>9577517d-a65c-34b3-9bc2-2bc37ec8c1ee</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>484a5073-02fd-32d6-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>bcb12ee9-c6f7-3471-88bf-e8c1d5f08a00</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>5316d551-7d07-3c4f-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>117b9632-9054-3c01-8a02-aba2286bbf47</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>4b160bea-fae4-3ff7-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>2e5873f3-c8f3-337c-ae86-5c5cf8134406</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>b6e76db7-056c-3735-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>4cfe7b0a-ba51-3cc1-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>6751dc7a-6ee1-3a0d-9e88-0fdfe9f84ecf</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>9980fa92-3638-3e64-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>59c9f331-e57f-35d1-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>3da6582e-38bd-3fc6-a8ab-848479e6afd6</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>51e8c3e3-31a4-3289-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>2b3bccd7-69f2-3275-86cb-d4ba3a99db20</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>64a5f1e4-cc95-3b3e-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>69625332-55d4-391a-b416-e8207271720f</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>8879cbf5-923a-3002-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>c201f4e0-e6dc-3a43-8e97-3373dd87a6d9</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>6eda3a93-3d4b-36a7-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>f3f4dfc3-a1b7-3a78-a0f8-9f8bfdb0f68a</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>9980fa92-3638-3e64-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>7222f19d-47d6-32bd-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>5e13f6cc-a74f-39f0-a9a9-d123fe23311c</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>51e8c3e3-31a4-3289-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>2b3bccd7-69f2-3275-86cb-d4ba3a99db20</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>738e2e9a-cb94-388a-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>9b749f19-8e99-3b4d-9d91-cc0d54e2c8b1</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>9980fa92-3638-3e64-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>76abb8f1-b5b5-3041-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>569258cf-4d16-308a-b1ba-b16391f66961</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>5316d551-7d07-3c4f-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>117b9632-9054-3c01-8a02-aba2286bbf47</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>7828e5ff-1801-3d62-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>de10847d-69d0-39bc-a712-2440353d35a3</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>b6e76db7-056c-3735-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>7996aaa4-43d5-3314-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>4f028a59-1984-3cb9-a0b9-873ac4a29914</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>51e8c3e3-31a4-3289-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>2b3bccd7-69f2-3275-86cb-d4ba3a99db20</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>8ba05d36-9d84-362b-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>5c61b053-c182-3efa-b38e-e6e7aefb7343</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>aefba3a9-0b62-37ba-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>00f2cf42-4c7c-3d67-89c7-a5364265c82a</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>9805b16a-54c0-3243-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>a012915d-2b3e-36f2-b30f-9ecd626aa2ef</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>2d2b8395-d1b4-3c15-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>98bda939-41d7-3c09-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>a5f758ac-a777-3087-97ba-77efb2030b2d</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>b6e76db7-056c-3735-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>9931b028-7508-3022-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>2772d15e-3308-3cf4-b653-50baf78d2d09</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>377e688f-103a-3b20-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>9577517d-a65c-34b3-9bc2-2bc37ec8c1ee</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>bd41ecc2-bd49-3d4a-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>e03acede-834f-3884-b10c-ec606545a40a</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>8879cbf5-923a-3002-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>c201f4e0-e6dc-3a43-8e97-3373dd87a6d9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>c91f7178-0838-3841-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>47db0cb4-19d8-31b4-81c5-45881b2194c2</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>671e5bba-e9dc-3611-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>c9d2e17d-182b-335a-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>454aca3f-88b5-3294-8ff3-65b4bc9557ea</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <bends>
<x>1336.0</x>
<y>1640.0</y>
                            </bends>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>original</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>2d2b8395-d1b4-3c15-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>f0356b61-c63a-3eb0-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>4a79e0c5-93a5-3b09-a992-a44aea1e81f3</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>377e688f-103a-3b20-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>9577517d-a65c-34b3-9bc2-2bc37ec8c1ee</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>f62bb77f-ec98-32a0-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>1fc7d55e-fc74-3abc-818d-26fbf42b8428</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>8879cbf5-923a-3002-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>c201f4e0-e6dc-3a43-8e97-3373dd87a6d9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>f9872b78-a1e7-384d-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>f26d913a-7eb2-39e5-9cf5-410fbff48b15</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>2d2b8395-d1b4-3c15-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_INACTIVE</loadBalanceStatus>
                            <loadBalanceStrategy>SINGLE_NODE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>e96f2e4c-c2ad-3697-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>faefce65-4ee2-35bc-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>fa2106a5-ab33-3edd-8454-068f276b4208</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>fe5103ef-3542-384e-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>092d9853-c6cc-3925-9479-c28402a2e0b6</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>fe1184e8-bced-354c-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>36ad2d2e-1a46-38a6-9f17-c1f843647429</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>671e5bba-e9dc-3611-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>64fec237-74cd-38eb-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>fe6e8781-7913-342b-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <versionedComponentId>cc264438-7180-32b2-b620-63700ee03857</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <bends>
<x>134.57369995117188</x>
<y>151.3234405517578</y>
                            </bends>
                            <destination>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>36fce048-312d-3f11-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>0</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>32cb37ac-bdfd-3d76-0000-000000000000</groupId>
<id>671e5bba-e9dc-3611-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <funnels>
                            <id>e96f2e4c-c2ad-3697-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>872.0</x>
<y>368.0</y>
                            </position>
                            <versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                        </funnels>
                        <inputPorts>
                            <id>64fec237-74cd-38eb-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-760.0</x>
<y>368.0</y>
                            </position>
                            <versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            <comments> </comments>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>IN</name>
                            <state>STOPPED</state>
                            <type>INPUT_PORT</type>
                        </inputPorts>
                        <outputPorts>
                            <id>f7f6f022-dcba-3f64-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>1784.0</x>
<y>344.0</y>
                            </position>
                            <versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                            <comments></comments>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>OUT</name>
                            <state>STOPPED</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>2d2b8395-d1b4-3c15-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>1160.0</x>
<y>296.0</y>
                            </position>
                            <versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Merge Strategy</key>
        <value>
            <name>Merge Strategy</name>
        </value>
    </entry>
    <entry>
        <key>Merge Format</key>
        <value>
            <name>Merge Format</name>
        </value>
    </entry>
    <entry>
        <key>Attribute Strategy</key>
        <value>
            <name>Attribute Strategy</name>
        </value>
    </entry>
    <entry>
        <key>Correlation Attribute Name</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Correlation Attribute Name</name>
        </value>
    </entry>
    <entry>
        <key>mergecontent-metadata-strategy</key>
        <value>
            <dependencies>
                <dependentValues>Avro</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>mergecontent-metadata-strategy</name>
        </value>
    </entry>
    <entry>
        <key>Minimum Number of Entries</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Minimum Number of Entries</name>
        </value>
    </entry>
    <entry>
        <key>Maximum Number of Entries</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Maximum Number of Entries</name>
        </value>
    </entry>
    <entry>
        <key>Minimum Group Size</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Minimum Group Size</name>
        </value>
    </entry>
    <entry>
        <key>Maximum Group Size</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Maximum Group Size</name>
        </value>
    </entry>
    <entry>
        <key>Max Bin Age</key>
        <value>
            <name>Max Bin Age</name>
        </value>
    </entry>
    <entry>
        <key>Maximum number of Bins</key>
        <value>
            <name>Maximum number of Bins</name>
        </value>
    </entry>
    <entry>
        <key>Delimiter Strategy</key>
        <value>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Delimiter Strategy</name>
        </value>
    </entry>
    <entry>
        <key>Header File</key>
        <value>
            <dependencies>
                <dependentValues>Filename</dependentValues>
                <dependentValues>Text</dependentValues>
                <propertyName>Delimiter Strategy</propertyName>
            </dependencies>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Header File</name>
        </value>
    </entry>
    <entry>
        <key>Footer File</key>
        <value>
            <dependencies>
                <dependentValues>Filename</dependentValues>
                <dependentValues>Text</dependentValues>
                <propertyName>Delimiter Strategy</propertyName>
            </dependencies>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Footer File</name>
        </value>
    </entry>
    <entry>
        <key>Demarcator File</key>
        <value>
            <dependencies>
                <dependentValues>Filename</dependentValues>
                <dependentValues>Text</dependentValues>
                <propertyName>Delimiter Strategy</propertyName>
            </dependencies>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Demarcator File</name>
        </value>
    </entry>
    <entry>
        <key>Compression Level</key>
        <value>
            <dependencies>
                <dependentValues>ZIP</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Compression Level</name>
        </value>
    </entry>
    <entry>
        <key>Keep Path</key>
        <value>
            <dependencies>
                <dependentValues>ZIP</dependentValues>
                <dependentValues>TAR</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Keep Path</name>
        </value>
    </entry>
    <entry>
        <key>Tar Modified Time</key>
        <value>
            <dependencies>
                <dependentValues>TAR</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Tar Modified Time</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Merge Strategy</key>
        <value>Bin-Packing Algorithm</value>
    </entry>
    <entry>
        <key>Merge Format</key>
        <value>Binary Concatenation</value>
    </entry>
    <entry>
        <key>Attribute Strategy</key>
        <value>Keep Only Common Attributes</value>
    </entry>
    <entry>
        <key>Correlation Attribute Name</key>
    </entry>
    <entry>
        <key>mergecontent-metadata-strategy</key>
        <value>Do Not Merge Uncommon Metadata</value>
    </entry>
    <entry>
        <key>Minimum Number of Entries</key>
        <value>9</value>
    </entry>
    <entry>
        <key>Maximum Number of Entries</key>
        <value>11</value>
    </entry>
    <entry>
        <key>Minimum Group Size</key>
        <value>0 B</value>
    </entry>
    <entry>
        <key>Maximum Group Size</key>
    </entry>
    <entry>
        <key>Max Bin Age</key>
    </entry>
    <entry>
        <key>Maximum number of Bins</key>
        <value>1</value>
    </entry>
    <entry>
        <key>Delimiter Strategy</key>
        <value>Do Not Use Delimiters</value>
    </entry>
    <entry>
        <key>Header File</key>
    </entry>
    <entry>
        <key>Footer File</key>
    </entry>
    <entry>
        <key>Demarcator File</key>
    </entry>
    <entry>
        <key>Compression Level</key>
        <value>1</value>
    </entry>
    <entry>
        <key>Keep Path</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Tar Modified Time</key>
        <value>${file.lastModifiedTime}</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>MergeContent</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>merged</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>original</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.MergeContent</type>
                        </processors>
                        <processors>
                            <id>36fce048-312d-3f11-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>64.0</x>
<y>1576.0</y>
                            </position>
                            <versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Log Level</key>
        <value>
            <name>Log Level</name>
        </value>
    </entry>
    <entry>
        <key>Log Payload</key>
        <value>
            <name>Log Payload</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Log</key>
        <value>
            <name>Attributes to Log</name>
        </value>
    </entry>
    <entry>
        <key>attributes-to-log-regex</key>
        <value>
            <name>attributes-to-log-regex</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Ignore</key>
        <value>
            <name>Attributes to Ignore</name>
        </value>
    </entry>
    <entry>
        <key>attributes-to-ignore-regex</key>
        <value>
            <name>attributes-to-ignore-regex</name>
        </value>
    </entry>
    <entry>
        <key>Log FlowFile Properties</key>
        <value>
            <name>Log FlowFile Properties</name>
        </value>
    </entry>
    <entry>
        <key>Output Format</key>
        <value>
            <name>Output Format</name>
        </value>
    </entry>
    <entry>
        <key>Log prefix</key>
        <value>
            <name>Log prefix</name>
        </value>
    </entry>
    <entry>
        <key>character-set</key>
        <value>
            <name>character-set</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Log Level</key>
        <value>info</value>
    </entry>
    <entry>
        <key>Log Payload</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Attributes to Log</key>
    </entry>
    <entry>
        <key>attributes-to-log-regex</key>
        <value>.*</value>
    </entry>
    <entry>
        <key>Attributes to Ignore</key>
    </entry>
    <entry>
        <key>attributes-to-ignore-regex</key>
    </entry>
    <entry>
        <key>Log FlowFile Properties</key>
        <value>true</value>
    </entry>
    <entry>
        <key>Output Format</key>
        <value>Line per Attribute</value>
    </entry>
    <entry>
        <key>Log prefix</key>
    </entry>
    <entry>
        <key>character-set</key>
        <value>UTF-8</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>25</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>LogAttribute</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.LogAttribute</type>
                        </processors>
                        <processors>
                            <id>377e688f-103a-3b20-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>720.0</y>
                            </position>
                            <versionedComponentId>9577517d-a65c-34b3-9bc2-2bc37ec8c1ee</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_updt_Lab_Result_Comment_list;
select LAB_TEST_uid 
 into dbo.TMP_updt_Lab_Result_Comment_list
 from rdb..Lab_Result_Comment 
 where LAB_TEST_uid in (select observation_uid from dbo.TMP_updated_observation_List);
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 9,' GENERATING TMP_updt_Lab_Result_Comment_list ',(select count(1) from DBO.TMP_updt_Lab_Result_Comment_list with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow7</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>51e8c3e3-31a4-3289-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>232.0</y>
                            </position>
                            <versionedComponentId>2b3bccd7-69f2-3275-86cb-d4ba3a99db20</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
drop table if exists dbo.TMP_updt_Lab_Result_Val_list;
 select LAB_TEST_uid
 into dbo.TMP_updt_Lab_Result_Val_list 
 from rdb..Lab_Result_Val 
 where LAB_TEST_uid in (select observation_uid from dbo.TMP_updated_observation_List);
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 6,' GENERATING TMP_updt_Lab_Result_Val_list ',(select count(1) from DBO.TMP_updt_Lab_Result_Val_list with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow4</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>5316d551-7d07-3c4f-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>568.0</y>
                            </position>
                            <versionedComponentId>117b9632-9054-3c01-8a02-aba2286bbf47</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_updT_Result_Comment_Grp_LIST;
select LAB_TEST_uid 
 into dbo.TMP_updT_Result_Comment_Grp_LIST
 from rdb..RESULT_COMMENT_GROUP 
 where LAB_TEST_uid in (select observation_uid from dbo.TMP_updated_observation_List);
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 8,' GENERATING TMP_updT_Result_Comment_Grp_LIST ',(select count(1) from DBO.TMP_updT_Result_Comment_Grp_LIST with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow6</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>671e5bba-e9dc-3611-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>-248.0</y>
                            </position>
                            <versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>--STEP 2
drop table if exists dbo.TMP_updated_LAB_TEST_list;
select LAB_TEST_uid, LAB_TEST_key 
into dbo.TMP_updated_LAB_TEST_list
from rdb..LAB_TEST
where LAB_TEST_uid in (select observation_uid from dbo.TMP_updated_observation_List)
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 3,' GENERATING TMP_updated_LAB_TEST_list ',(select count(1) from DBO.TMP_updated_LAB_TEST_list with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow1</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>8879cbf5-923a-3002-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>880.0</y>
                            </position>
                            <versionedComponentId>c201f4e0-e6dc-3a43-8e97-3373dd87a6d9</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_s_edx_document1;
select EDX_Document_uid, act_uid, add_time
 into dbo.TMP_s_edx_document1
from (select EDX_Document_uid, act_uid, add_time ,ROW_NUMBER() OVER (PARTITION BY act_uid ORDER BY add_time DESC) rankno
      from nbs_odse..EDX_Document, rdb..s_updated_lab 
      where  EDX_Document.act_uid=s_updated_lab.observation_Uid 
 ) edx_lst
 where edx_lst.rankno = 1
 ;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 11,' GENERATING TMP_s_edx_document1 ',(select count(1) from DBO.TMP_s_edx_document1 with(nolock)));



drop table if exists dbo.TMP_s_edx_document;

 select EDX_Document_uid,
   act_uid,
   add_time ,
   CONVERT(varchar, add_time, 101) as add_timeSt, --VS put(datepart(add_time),mmddyy10.) as add_timeSt
   cast( null as varchar(500)) as document_link
  into dbo.TMP_s_edx_document
  from dbo.TMP_s_edx_document1
  ;

update dbo.TMP_s_edx_document
set document_link =('&lt;a href="#" '+ replace(('onClick="window.open(''/nbs/viewELRDocument.do?method=viewELRDocument&amp;documentUid=' 
+ cast(EDX_Document_uid as varchar) + ' &amp;dateReceivedHidden=' + add_timeSt +''' ,''DocumentViewer'',''width=900,height=800,left=0,top=0,
menubar=no,titlebar=no,toolbar=no,scrollbars=yes,location=no'');"&gt;View Lab Document&lt;/a&gt;'),' ',''));

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 17,' GENERATING TMP_s_edx_document ',(select count(1) from DBO.TMP_s_edx_document with(nolock)));

</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow8</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>9980fa92-3638-3e64-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>64.0</y>
                            </position>
                            <versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
drop table if exists dbo.TMP_updt_Test_Result_Grouping_LIST ;
select LAB_TEST_uid 
into dbo.TMP_updt_Test_Result_Grouping_LIST
from rdb..Test_Result_Grouping 
where LAB_TEST_uid in (select observation_uid from dbo.TMP_updated_observation_List);
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 5,' GENERATING TMP_updt_Test_Result_Grouping_LIST ',(select count(1) from DBO.TMP_updt_Test_Result_Grouping_LIST with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow3</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>aefba3a9-0b62-37ba-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>400.0</y>
                            </position>
                            <versionedComponentId>00f2cf42-4c7c-3d67-89c7-a5364265c82a</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
drop table if exists dbo.TMP_updated_LAB_TEST_result_list;
select LAB_TEST_key 
 into dbo.TMP_updated_LAB_TEST_result_list
 from rdb..LAB_TEST_RESULT 
 where LAB_TEST_uid in (select OBSERVATION_UID from dbo.TMP_updated_observation_List);
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 7,' GENERATING TMP_updated_LAB_TEST_result_list ',(select count(1) from DBO.TMP_updated_LAB_TEST_result_list with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow5</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>b6e76db7-056c-3735-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>-96.0</y>
                            </position>
                            <versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
drop table if exists dbo.TMP_updated_LAB_RPT_USER_COMMENT;
select user_comment_key 
into  dbo.TMP_updated_LAB_RPT_USER_COMMENT
from rdb..LAB_RPT_USER_COMMENT 
where LAB_TEST_uid in (select observation_uid from  dbo.TMP_updated_observation_List);
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 4,' GENERATING TMP_updated_LAB_RPT_USER_COMMENT ',(select count(1) from DBO.TMP_updated_LAB_RPT_USER_COMMENT with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow2</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>fe5103ef-3542-384e-0000-000000000000</id>
                            <parentGroupId>32cb37ac-bdfd-3d76-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>1048.0</y>
                            </position>
                            <versionedComponentId>092d9853-c6cc-3925-9479-c28402a2e0b6</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_updated_participant;
select act_uid,subject_entity_uid, type_cd,act_class_cd,record_status_cd,subject_class_cd,observation_uid
into dbo.TMP_updated_participant
from nbs_odse..participation, dbo.TMP_updated_observation_List obs 
where participation.act_uid=obs.observation_uid;

CREATE NONCLUSTERED INDEX [idx_TMP_updated_participant_tcd] ON [dbo].[TMP_updated_participant]
(
[type_cd] ASC,
[act_class_cd] ASC,
[record_status_cd] ASC,
[subject_class_cd] ASC
)
INCLUDE ( [act_uid],
[subject_entity_uid])
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 12,' GENERATING TMP_updated_participant ',(select count(1) from DBO.TMP_updated_participant with(nolock)));


 -- Create Table merged_provider as
 



drop table if exists dbo.TMP_merged_provider;
Select distinct a.provider_first_name, a.provider_last_name, a.provider_uid, a.provider_key,
 b.root_extension_txt as person_id_val,
 b.type_cd as patient_id_type,
--VS put(b.type_cd,$EI_TYPE.) as person_id_type_desc,   /* code_set_nm = EI_TYPE */
cvg.code_short_desc_txt as person_id_type_desc,   /* code_set_nm = EI_TYPE */
 b.assigning_authority_cd as person_id_assign_auth_cd,
 b.record_status_cd
   into dbo.TMP_merged_provider
   from dbo.TMP_updated_participant PART 
   LEFT JOIN rdb..d_provider a  ON PART.SUBJECT_ENTITY_UID=a.provider_uid
   LEFT JOIN nbs_odse..entity_id b On a.provider_uid = b.entity_uid
   left join nbs_srte..code_value_general  as cvg on b.type_cd = cvg.code and cvg.code_set_nm = 'EI_TYPE'
   ;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 13,' GENERATING TMP_merged_provider ',(select count(1) from DBO.TMP_merged_provider with(nolock)));


/* -- VS

data filter_participants (rename = (subject_entity_uid = provider_uid));
set updated_participant;
where type_cd in ('ENT', 'ASS', 'VRF')
and act_class_cd = 'OBS'
and record_status_cd ='ACTIVE'
and subject_class_cd = 'PSN'; 
 
*/

   
drop table if exists dbo.TMP_filter_participants ;
select act_uid,
subject_entity_uid as provider_uid_filter,
 type_cd,act_class_cd,
 record_status_cd as record_status_cd_filter,
 subject_class_cd,
observation_uid
into dbo.TMP_filter_participants
from dbo.TMP_updated_participant
where type_cd in ('ENT', 'ASS', 'VRF')
and act_class_cd = 'OBS'
and record_status_cd ='ACTIVE'
and subject_class_cd = 'PSN'; 
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 14,' GENERATING TMP_filter_participants ',(select count(1) from DBO.TMP_filter_participants with(nolock)));


-- create table participants as 

 
drop table if exists dbo.TMP_participants ;
select * 
 into dbo.TMP_participants
 from dbo.TMP_filter_participants tfp, dbo.TMP_merged_provider tmp
where tfp.provider_uid_filter= tmp.provider_uid;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 15,' GENERATING TMP_participants ',(select count(1) from DBO.TMP_participants with(nolock)));




drop table if exists dbo.TMP_LAB_TESTinit_a;
select distinct
obs.observation_uid as LAB_TEST_uid_Test,
1 as parent_test_pntr,
obs.observation_uid as LAB_TEST_pntr,
obs.activity_to_time as LAB_TEST_dt,
obs.method_cd as test_method_cd,
1 as root_ordered_test_pntr,
obs.method_desc_txt as test_method_cd_desc,
obs.priority_cd as priority_cd,
obs.target_site_cd as specimen_site,
obs.target_site_desc_txt   as SPECIMEN_SITE_desc, 
obs.txt as Clinical_information,
obs.obs_domain_cd_st_1  as LAB_TEST_Type,
obs.cd  as LAB_TEST_cd, 
obs.Cd_desc_txt as LAB_TEST_cd_desc,
obs.Cd_system_cd as LAB_TEST_cd_sys_cd,
obs.Cd_system_desc_txt as LAB_TEST_cd_sys_nm,
obs.Alt_cd as Alt_LAB_TEST_cd,
obs.Alt_cd_desc_txt as Alt_LAB_TEST_cd_desc,
obs.Alt_cd_system_cd as Alt_LAB_TEST_cd_sys_cd,
obs.Alt_cd_system_desc_txt  as Alt_LAB_TEST_cd_sys_nm,
obs.effective_from_time  as specimen_collection_dt,
obs.local_id as lab_rpt_local_id,
obs.shared_ind as lab_rpt_share_ind,
obs.PROGRAM_JURISDICTION_OID as oid,
obs.record_status_cd as record_status_cd,
obs.record_status_cd as record_status_cd_for_result,
obs.STATUS_CD as lab_rpt_status,
obs.ADD_TIME as LAB_RPT_CREATED_DT,
obs.ADD_USER_ID as LAB_RPT_CREATED_BY, 
obs.rpt_to_state_time   as LAB_RPT_RECEIVED_BY_PH_DT, 
obs.LAST_CHG_TIME  as LAB_RPT_LAST_UPDATE_DT, 
obs.LAST_CHG_USER_ID as LAB_RPT_LAST_UPDATE_BY, 
obs.electronic_ind as ELR_IND, 
obs.jurisdiction_cd as Jurisdiction_cd,
 cast(null as [varchar](50)) as JURISDICTION_NM, -- VS put(obs.jurisdiction_cd, $JURCODE.)  as JURISDICTION_NM, 
obs.observation_uid as Lab_Rpt_Uid,
/*obs.PROG_AREA_CD,*/
obs.activity_to_time as resulted_lab_report_date,
obs.activity_to_time as sus_lab_report_date,
loinc_con.condition_cd as condition_cd,
cvg.code_short_desc_txt as LAB_TEST_status,
obs.PROCESSING_DECISION_CD 
into dbo.TMP_LAB_TESTinit_a
from dbo.TMP_updated_observation_List tuol 
left outer join nbs_odse..observation as obs on tuol.OBSERVATION_UID=obs.OBSERVATION_UID
left join   nbs_srte..loinc_condition as loinc_con on obs.cd = loinc_con.loinc_cd
left join nbs_srte..code_value_general  as cvg on obs.status_cd = cvg.code and cvg.code_set_nm = 'ACT_OBJ_ST'
where obs.obs_domain_cd_st_1 in ('Order','Result','R_Order','R_Result', 'I_Order', 'I_Result', 'Order_rslt') 
and (obs.CTRL_CD_DISPLAY_FORM = 'LabReport' or obs.CTRL_CD_DISPLAY_FORM = 'LabReportMorb' or obs.CTRL_CD_DISPLAY_FORM is null)
--order by obs.OBSERVATION_UID
;

update dbo.TMP_LAB_TESTinit_a
set jurisdiction_nm = (
select code_short_desc_txt 
from nbs_srte..jurisdiction_code where code= TMP_LAB_TESTinit_a.Jurisdiction_cd and code_set_nm = 'S_JURDIC_C'
)
where Jurisdiction_cd is not null
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 16,' GENERATING TMP_LAB_TESTinit_a ',(select count(1) from DBO.TMP_LAB_TESTinit_a with(nolock)));


</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow9</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                    </contents>
                    <defaultBackPressureDataSizeThreshold>1 GB</defaultBackPressureDataSizeThreshold>
                    <defaultBackPressureObjectThreshold>10000</defaultBackPressureObjectThreshold>
                    <defaultFlowFileExpiration>0 sec</defaultFlowFileExpiration>
                    <flowfileConcurrency>SINGLE_BATCH_PER_NODE</flowfileConcurrency>
                    <flowfileOutboundPolicy>BATCH_OUTPUT</flowfileOutboundPolicy>
                    <name>Parallel_01 (Step 2 &amp; 3)</name>
                    <variables/>
                </processGroups>
                <processGroups>
                    <id>3c4539ee-3cb7-3f0e-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>232.0</x>
                        <y>272.0</y>
                    </position>
                    <versionedComponentId>1dcf62c9-b19f-3cc1-8dda-9d6cd752c278</versionedComponentId>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>0129dd2b-fbe9-388b-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>8b5b0946-1a52-3571-bdf3-f849a62ae58f</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>df8a52c2-5fe5-3281-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>1877882f-1064-3062-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>1e85455d-e640-39ab-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>b6381ce4-68d5-3e35-a462-60ed976d4a52</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>4e334a72-d7cf-398f-0000-000000000000</id>
<type>OUTPUT_PORT</type>
<versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>merged</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>1877882f-1064-3062-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>234105ac-1122-393a-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>e404294c-0203-3ddf-9ec4-fc14c206f8f0</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <bends>
<x>1008.0</x>
<y>368.0</y>
                            </bends>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>df8a52c2-5fe5-3281-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>original</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>1877882f-1064-3062-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>3765aa26-5bbe-3160-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>de10847d-69d0-39bc-a712-2440353d35a3</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>df8a52c2-5fe5-3281-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>4f39f14e-8737-3383-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>47849a80-e362-3454-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>a5f758ac-a777-3087-97ba-77efb2030b2d</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>4f39f14e-8737-3383-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>bd15b121-c0be-31b8-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>55531ed2-6da4-35e0-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>6751dc7a-6ee1-3a0d-9e88-0fdfe9f84ecf</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>405d631b-46eb-3817-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>bd15b121-c0be-31b8-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>60f69257-15c1-3263-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>f26d913a-7eb2-39e5-9cf5-410fbff48b15</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>1877882f-1064-3062-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>ec88d615-4024-349e-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>67a00676-9691-3f64-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>47db0cb4-19d8-31b4-81c5-45881b2194c2</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>ec88d615-4024-349e-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>e21121a8-1ebc-3997-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>95c457fb-456d-3193-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>36ad2d2e-1a46-38a6-9f17-c1f843647429</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>e21121a8-1ebc-3997-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>bd15b121-c0be-31b8-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>a2e771d3-12b1-38ef-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>9b749f19-8e99-3b4d-9d91-cc0d54e2c8b1</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>df8a52c2-5fe5-3281-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>405d631b-46eb-3817-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>a4ab76d8-313c-31a0-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>cc264438-7180-32b2-b620-63700ee03857</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>df8a52c2-5fe5-3281-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>e21121a8-1ebc-3997-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>a747b752-24e2-303e-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>f3f4dfc3-a1b7-3a78-a0f8-9f8bfdb0f68a</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>ec88d615-4024-349e-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>405d631b-46eb-3817-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>eeb42921-181d-35a5-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <versionedComponentId>2e5873f3-c8f3-337c-ae86-5c5cf8134406</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>ec88d615-4024-349e-0000-000000000000</id>
<type>FUNNEL</type>
<versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>3c4539ee-3cb7-3f0e-0000-000000000000</groupId>
<id>4f39f14e-8737-3383-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <funnels>
                            <id>ec88d615-4024-349e-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>648.0</x>
<y>-56.0</y>
                            </position>
                            <versionedComponentId>b15abf0d-30fa-3c6c-aaee-8c09fe1c46ef</versionedComponentId>
                        </funnels>
                        <inputPorts>
                            <id>bd15b121-c0be-31b8-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>-576.0</x>
<y>-56.0</y>
                            </position>
                            <versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            <comments> </comments>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>IN2</name>
                            <state>STOPPED</state>
                            <type>INPUT_PORT</type>
                        </inputPorts>
                        <outputPorts>
                            <id>4e334a72-d7cf-398f-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>1480.0</x>
<y>-56.0</y>
                            </position>
                            <versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                            <comments></comments>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>OUT2</name>
                            <state>STOPPED</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>1877882f-1064-3062-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>832.0</x>
<y>-96.0</y>
                            </position>
                            <versionedComponentId>977be489-d21b-3fe1-af1f-fed687824ad9</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Merge Strategy</key>
        <value>
            <name>Merge Strategy</name>
        </value>
    </entry>
    <entry>
        <key>Merge Format</key>
        <value>
            <name>Merge Format</name>
        </value>
    </entry>
    <entry>
        <key>Attribute Strategy</key>
        <value>
            <name>Attribute Strategy</name>
        </value>
    </entry>
    <entry>
        <key>Correlation Attribute Name</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Correlation Attribute Name</name>
        </value>
    </entry>
    <entry>
        <key>mergecontent-metadata-strategy</key>
        <value>
            <dependencies>
                <dependentValues>Avro</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>mergecontent-metadata-strategy</name>
        </value>
    </entry>
    <entry>
        <key>Minimum Number of Entries</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Minimum Number of Entries</name>
        </value>
    </entry>
    <entry>
        <key>Maximum Number of Entries</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Maximum Number of Entries</name>
        </value>
    </entry>
    <entry>
        <key>Minimum Group Size</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Minimum Group Size</name>
        </value>
    </entry>
    <entry>
        <key>Maximum Group Size</key>
        <value>
            <dependencies>
                <dependentValues>Bin-Packing Algorithm</dependentValues>
                <propertyName>Merge Strategy</propertyName>
            </dependencies>
            <name>Maximum Group Size</name>
        </value>
    </entry>
    <entry>
        <key>Max Bin Age</key>
        <value>
            <name>Max Bin Age</name>
        </value>
    </entry>
    <entry>
        <key>Maximum number of Bins</key>
        <value>
            <name>Maximum number of Bins</name>
        </value>
    </entry>
    <entry>
        <key>Delimiter Strategy</key>
        <value>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Delimiter Strategy</name>
        </value>
    </entry>
    <entry>
        <key>Header File</key>
        <value>
            <dependencies>
                <dependentValues>Filename</dependentValues>
                <dependentValues>Text</dependentValues>
                <propertyName>Delimiter Strategy</propertyName>
            </dependencies>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Header File</name>
        </value>
    </entry>
    <entry>
        <key>Footer File</key>
        <value>
            <dependencies>
                <dependentValues>Filename</dependentValues>
                <dependentValues>Text</dependentValues>
                <propertyName>Delimiter Strategy</propertyName>
            </dependencies>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Footer File</name>
        </value>
    </entry>
    <entry>
        <key>Demarcator File</key>
        <value>
            <dependencies>
                <dependentValues>Filename</dependentValues>
                <dependentValues>Text</dependentValues>
                <propertyName>Delimiter Strategy</propertyName>
            </dependencies>
            <dependencies>
                <dependentValues>Binary Concatenation</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Demarcator File</name>
        </value>
    </entry>
    <entry>
        <key>Compression Level</key>
        <value>
            <dependencies>
                <dependentValues>ZIP</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Compression Level</name>
        </value>
    </entry>
    <entry>
        <key>Keep Path</key>
        <value>
            <dependencies>
                <dependentValues>ZIP</dependentValues>
                <dependentValues>TAR</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Keep Path</name>
        </value>
    </entry>
    <entry>
        <key>Tar Modified Time</key>
        <value>
            <dependencies>
                <dependentValues>TAR</dependentValues>
                <propertyName>Merge Format</propertyName>
            </dependencies>
            <name>Tar Modified Time</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Merge Strategy</key>
        <value>Bin-Packing Algorithm</value>
    </entry>
    <entry>
        <key>Merge Format</key>
        <value>Binary Concatenation</value>
    </entry>
    <entry>
        <key>Attribute Strategy</key>
        <value>Keep Only Common Attributes</value>
    </entry>
    <entry>
        <key>Correlation Attribute Name</key>
    </entry>
    <entry>
        <key>mergecontent-metadata-strategy</key>
        <value>Do Not Merge Uncommon Metadata</value>
    </entry>
    <entry>
        <key>Minimum Number of Entries</key>
        <value>3</value>
    </entry>
    <entry>
        <key>Maximum Number of Entries</key>
        <value>4</value>
    </entry>
    <entry>
        <key>Minimum Group Size</key>
        <value>0 B</value>
    </entry>
    <entry>
        <key>Maximum Group Size</key>
    </entry>
    <entry>
        <key>Max Bin Age</key>
    </entry>
    <entry>
        <key>Maximum number of Bins</key>
        <value>1</value>
    </entry>
    <entry>
        <key>Delimiter Strategy</key>
        <value>Do Not Use Delimiters</value>
    </entry>
    <entry>
        <key>Header File</key>
    </entry>
    <entry>
        <key>Footer File</key>
    </entry>
    <entry>
        <key>Demarcator File</key>
    </entry>
    <entry>
        <key>Compression Level</key>
        <value>1</value>
    </entry>
    <entry>
        <key>Keep Path</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Tar Modified Time</key>
        <value>${file.lastModifiedTime}</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>MergeContent</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>merged</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>original</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.MergeContent</type>
                        </processors>
                        <processors>
                            <id>405d631b-46eb-3817-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>64.0</y>
                            </position>
                            <versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_OBS_REASON;

 select 
obs.observation_uid,
rsn.reason_desc_txt,
rsn.reason_cd ,
   cast( null as varchar(4000)) as REASON_FOR_TEST_DESC,
   cast( null as varchar(2000)) as REASON_FOR_TEST_CD
into  dbo.TMP_OBS_REASON
from dbo.TMP_updated_observation_List obs 
 LEFT JOIN  nbs_odse..observation_reason as rsn on obs.observation_uid= rsn.observation_uid
--order by obs.observation_uid
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 20,' GENERATING TMP_OBS_REASON ',(select count(1) from DBO.TMP_OBS_REASON with(nolock)));






drop table if exists dbo.TMP_OBS_REASON_FINAL ;

SELECT DISTINCT LRV.observation_uid,  
   SUBSTRING(
(
SELECT '|'+coalesce(ST1.reason_cd+'('+reason_desc_txt+')','')  AS [text()]
FROM dbo.TMP_OBS_REASON ST1
WHERE ST1.observation_uid = LRV.observation_uid
ORDER BY ST1.observation_uid
FOR XML PATH ('')
), 2, 1000) REASON_FOR_TEST_DESC,
SUBSTRING(
(
SELECT '|'+ST1.reason_cd  AS [text()]
FROM dbo.TMP_OBS_REASON ST1
WHERE ST1.observation_uid = LRV.observation_uid
ORDER BY ST1.observation_uid
FOR XML PATH ('')
), 2, 1000) REASON_FOR_TEST_CD
into dbo.TMP_OBS_REASON_FINAL 
FROM dbo.TMP_OBS_REASON LRV
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 21,' GENERATING TMP_OBS_REASON_FINAL ',(select count(1) from DBO.TMP_OBS_REASON_FINAL with(nolock)));


create index idx_TMP_participants_aid on dbo.TMP_participants (act_uid);
create index idx_TMP_OBS_REASON_FINAL_oid on  dbo.TMP_OBS_REASON_FINAL(observation_uid);
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow3</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>4f39f14e-8737-3383-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>-96.0</y>
                            </position>
                            <versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_LAB_TEST_mat_init;
select 
obs.observation_uid as LAB_TEST_uid_mat,
mat.cd as specimen_src,
mat.nm as specimen_nm,
mat.description as Specimen_details,
mat.qty as Specimen_collection_vol,
mat.qty_unit_cd as Specimen_collection_vol_unit,
mat.Cd_desc_txt as Specimen_desc,
mat.Risk_cd as Danger_cd,
mat.Risk_desc_txt as Danger_cd_desc
  into dbo.TMP_LAB_TEST_mat_init
from dbo.TMP_updated_observation_List obs 
inner join dbo.TMP_updated_participant as par on obs.observation_uid = par.act_uid and par.type_cd ='SPC' and par.subject_class_cd = 'MAT' and par.act_class_cd = 'OBS'
inner join nbs_odse..material as mat on par.subject_entity_uid = mat.material_uid 
order by obs.OBSERVATION_UID
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 19,' GENERATING TMP_LAB_TEST_mat_init ',(select count(1) from DBO.TMP_LAB_TEST_mat_init with(nolock)));

</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow2</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>df8a52c2-5fe5-3281-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>32.0</x>
<y>312.0</y>
                            </position>
                            <versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Log Level</key>
        <value>
            <name>Log Level</name>
        </value>
    </entry>
    <entry>
        <key>Log Payload</key>
        <value>
            <name>Log Payload</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Log</key>
        <value>
            <name>Attributes to Log</name>
        </value>
    </entry>
    <entry>
        <key>attributes-to-log-regex</key>
        <value>
            <name>attributes-to-log-regex</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Ignore</key>
        <value>
            <name>Attributes to Ignore</name>
        </value>
    </entry>
    <entry>
        <key>attributes-to-ignore-regex</key>
        <value>
            <name>attributes-to-ignore-regex</name>
        </value>
    </entry>
    <entry>
        <key>Log FlowFile Properties</key>
        <value>
            <name>Log FlowFile Properties</name>
        </value>
    </entry>
    <entry>
        <key>Output Format</key>
        <value>
            <name>Output Format</name>
        </value>
    </entry>
    <entry>
        <key>Log prefix</key>
        <value>
            <name>Log prefix</name>
        </value>
    </entry>
    <entry>
        <key>character-set</key>
        <value>
            <name>character-set</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Log Level</key>
        <value>info</value>
    </entry>
    <entry>
        <key>Log Payload</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Attributes to Log</key>
    </entry>
    <entry>
        <key>attributes-to-log-regex</key>
        <value>.*</value>
    </entry>
    <entry>
        <key>Attributes to Ignore</key>
    </entry>
    <entry>
        <key>attributes-to-ignore-regex</key>
    </entry>
    <entry>
        <key>Log FlowFile Properties</key>
        <value>true</value>
    </entry>
    <entry>
        <key>Output Format</key>
        <value>Line per Attribute</value>
    </entry>
    <entry>
        <key>Log prefix</key>
    </entry>
    <entry>
        <key>character-set</key>
        <value>UTF-8</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>25</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>LogAttribute</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.LogAttribute</type>
                        </processors>
                        <processors>
                            <id>e21121a8-1ebc-3997-0000-000000000000</id>
                            <parentGroupId>3c4539ee-3cb7-3f0e-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>-248.0</y>
                            </position>
                            <versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists  dbo.TMP_LAB_TESTinit;

 select distinct a.*, b.document_link 
 into dbo.TMP_LAB_TESTinit
from dbo.TMP_LAB_TESTinit_a a 
left outer join dbo.TMP_s_edx_document b on a.LAB_TEST_uid_test=b.act_uid;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 18,' GENERATING TMP_LAB_TESTinit ',(select count(1) from DBO.TMP_LAB_TESTinit with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow1</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                    </contents>
                    <defaultBackPressureDataSizeThreshold>1 GB</defaultBackPressureDataSizeThreshold>
                    <defaultBackPressureObjectThreshold>10000</defaultBackPressureObjectThreshold>
                    <defaultFlowFileExpiration>0 sec</defaultFlowFileExpiration>
                    <flowfileConcurrency>SINGLE_BATCH_PER_NODE</flowfileConcurrency>
                    <flowfileOutboundPolicy>BATCH_OUTPUT</flowfileOutboundPolicy>
                    <name>Parallel_02 (Step4)</name>
                    <variables/>
                </processGroups>
                <processGroups>
                    <id>e77ad3c3-81d0-3965-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>232.0</x>
                        <y>920.0</y>
                    </position>
                    <versionedComponentId>d2abe3c6-103e-31d6-9eaf-7d492b20b115</versionedComponentId>
                    <comments></comments>
                    <contents>
                        <connections>
                            <id>0eefa280-6015-3e90-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>505569a9-9b15-3349-87a3-a37c6c155307</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>b07b3d22-98ba-3620-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>8d56bbe5-d084-305b-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>2c30a041-837e-3ce2-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>dd4e2102-0f17-3caa-9e1b-fdb0e83849d0</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>8d56bbe5-d084-305b-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>741ccec8-4018-3bcb-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>4552d665-dd66-3717-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>cc264438-7180-32b2-b620-63700ee03857</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>a368642c-130c-3719-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>741ccec8-4018-3bcb-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>56ac0bb2-f930-3d08-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>df54767d-cded-3ef6-9389-651398d80086</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>a368642c-130c-3719-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>3471fe84-d1b4-3af6-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>3226d51d-9152-3f6a-9996-407da6e5a32f</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>6926d87c-49da-3134-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>f5bb1ef5-9687-3d44-949f-e1cf4ea00039</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>a368642c-130c-3719-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>9fd8c7c9-6a9b-33c2-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>7ba36d58-b5a7-3b44-a416-90e6161829c1</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>b143aef7-5e72-363f-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>36ad2d2e-1a46-38a6-9f17-c1f843647429</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>741ccec8-4018-3bcb-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>12aa01a0-d42f-3fe5-0000-000000000000</id>
<type>INPUT_PORT</type>
<versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>b2151caa-66d8-3255-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>9b749f19-8e99-3b4d-9d91-cc0d54e2c8b1</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>a368642c-130c-3719-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>b07b3d22-98ba-3620-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>b7480a99-1f7d-370a-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>8c60d79e-c1b2-33f6-93c0-765c77858c18</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>3471fe84-d1b4-3af6-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>3226d51d-9152-3f6a-9996-407da6e5a32f</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>9fd8c7c9-6a9b-33c2-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>7ba36d58-b5a7-3b44-a416-90e6161829c1</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>e3179310-f0fd-3371-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>5ec271db-71c8-35a4-88e7-8f1005ff3089</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>9fd8c7c9-6a9b-33c2-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>7ba36d58-b5a7-3b44-a416-90e6161829c1</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>b07b3d22-98ba-3620-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>ec48755c-55d3-31c1-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>de10847d-69d0-39bc-a712-2440353d35a3</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>a368642c-130c-3719-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>failure</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>8d56bbe5-d084-305b-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <connections>
                            <id>fbae430c-849c-3bf0-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <versionedComponentId>018f9b46-599c-357f-87b1-9d2079fe87f9</versionedComponentId>
                            <backPressureDataSizeThreshold>1 GB</backPressureDataSizeThreshold>
                            <backPressureObjectThreshold>10000</backPressureObjectThreshold>
                            <destination>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>43c6d86c-5800-324c-0000-000000000000</id>
<type>OUTPUT_PORT</type>
<versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                            </destination>
                            <flowFileExpiration>0 sec</flowFileExpiration>
                            <labelIndex>1</labelIndex>
                            <loadBalanceCompression>DO_NOT_COMPRESS</loadBalanceCompression>
                            <loadBalancePartitionAttribute></loadBalancePartitionAttribute>
                            <loadBalanceStatus>LOAD_BALANCE_NOT_CONFIGURED</loadBalanceStatus>
                            <loadBalanceStrategy>DO_NOT_LOAD_BALANCE</loadBalanceStrategy>
                            <name></name>
                            <selectedRelationships>success</selectedRelationships>
                            <source>
<groupId>e77ad3c3-81d0-3965-0000-000000000000</groupId>
<id>3471fe84-d1b4-3af6-0000-000000000000</id>
<type>PROCESSOR</type>
<versionedComponentId>3226d51d-9152-3f6a-9996-407da6e5a32f</versionedComponentId>
                            </source>
                            <zIndex>0</zIndex>
                        </connections>
                        <inputPorts>
                            <id>12aa01a0-d42f-3fe5-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>-576.0</x>
<y>128.0</y>
                            </position>
                            <versionedComponentId>908fa48c-8000-3f30-87b0-f508bd8fa926</versionedComponentId>
                            <comments> </comments>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>IN3</name>
                            <state>STOPPED</state>
                            <type>INPUT_PORT</type>
                        </inputPorts>
                        <outputPorts>
                            <id>43c6d86c-5800-324c-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>472.0</x>
<y>104.0</y>
                            </position>
                            <versionedComponentId>f18494ec-ae96-3c67-b8a4-c2692eaa3680</versionedComponentId>
                            <comments></comments>
                            <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                            <name>OUT3</name>
                            <state>STOPPED</state>
                            <type>OUTPUT_PORT</type>
                        </outputPorts>
                        <processors>
                            <id>3471fe84-d1b4-3af6-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>416.0</y>
                            </position>
                            <versionedComponentId>3226d51d-9152-3f6a-9996-407da6e5a32f</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_LAB_TEST ; 
select distinct
lab.*, ord.oid as order_oid --VS
into dbo.TMP_LAB_TEST
from dbo.TMP_LAB_TEST4 lab
left join dbo.TMP_order_test ord on lab.root_ordered_test_pntr=ord.root_ordered_test_pntr
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 43,' GENERATING TMP_LAB_TEST ',(select count(1) from DBO.TMP_LAB_TEST with(nolock)));



drop table if exists dbo.TMP_Merge_Order ;

select 
root_ordered_test_pntr  as root_ordered_test_pntr_merge,
ACCESSION_NBR as ACCESSION_NBR_merge,
LAB_RPT_CREATED_BY as LAB_RPT_CREATED_BY_merge ,
LAB_RPT_CREATED_DT,
JURISDICTION_CD,
JURISDICTION_NM,
LAB_TEST_dt,
specimen_collection_dt,
LAB_RPT_RECEIVED_BY_PH_DT,
LAB_RPT_LAST_UPDATE_DT,
LAB_RPT_LAST_UPDATE_BY,
ELR_IND as ELR_IND1 ,
specimen_src,
specimen_site,
Specimen_desc,
SPECIMEN_SITE_desc,
LAB_RPT_LOCAL_ID,
record_status_cd as record_status_cd_merge
into dbo.TMP_Merge_Order 
from dbo.TMP_LAB_TEST
Where LAB_TEST_Type = 'Order'
;



update dbo.TMP_Merge_Order
set  record_status_cd_merge = 'ACTIVE'
 where  record_status_cd_merge in ( '' ,'UNPROCESSED','UNPROCESSED_PREV_D','PROCESSED' )
 ;

update dbo.TMP_Merge_Order
 set  record_status_cd_merge = 'INACTIVE'
 where  record_status_cd_merge = 'LOG_DEL' 
 ;

update dbo.TMP_LAB_TEST
set record_status_cd = record_status_cd_for_result_drug
where  record_status_cd ='' 
;
 
update dbo.TMP_LAB_TEST
set LAB_TEST_DT = resulted_lab_report_date
  where  LAB_TEST_TYPE ='Result' 
   ; 


update dbo.TMP_LAB_TEST
  set LAB_TEST_DT = sus_lab_report_date
where LAB_TEST_TYPE ='Order_rslt' 
;

/* RK- disabled this 
alter table dbo.TMP_LAB_TEST
drop column
ACCESSION_NBR,
LAB_RPT_CREATED_BY,
LAB_RPT_CREATED_DT,
JURISDICTION_CD,
JURISDICTION_NM,
LAB_TEST_dt,
specimen_collection_dt,
LAB_RPT_RECEIVED_BY_PH_DT,
LAB_RPT_LAST_UPDATE_DT,
LAB_RPT_LAST_UPDATE_BY,
--ELR_IND,
resulted_lab_report_date,
sus_lab_report_date,
specimen_src,
specimen_site,
Specimen_desc,
SPECIMEN_SITE_desc,
LAB_RPT_LOCAL_ID,
record_status_cd_for_result,
record_status_cd_for_result_drug
;
*/

update dbo.TMP_LAB_TEST
set  record_status_cd = 'ACTIVE'
 where  record_status_cd in ( '' ,'UNPROCESSED','UNPROCESSED_PREV_D','PROCESSED' )
 or record_status_cd is null
 ;

update dbo.TMP_LAB_TEST
 set  record_status_cd = 'INACTIVE'
 where  record_status_cd = 'LOG_DEL' 
 ;


   update dbo.TMP_LAB_TEST
 set  TEST_METHOD_CD_DESC = null
  where rtrim(TEST_METHOD_CD_DESC) = ''
 ;


INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 44,' GENERATING TMP_Merge_Order ',(select count(1) from DBO.TMP_Merge_Order with(nolock)));


drop table if exists dbo.TMP_LAB_TEST_final_root_ordered_test_pntr;

select  root_ordered_test_pntr AS LAB_TEST_ptnr 
 into dbo.TMP_LAB_TEST_final_root_ordered_test_pntr
   from  dbo.TMP_LAB_TEST 
 union
 select root_ordered_test_pntr_merge
  from  dbo.TMP_Merge_Order  
 ; 

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 45,' GENERATING TMP_LAB_TEST_final_root_ordered_test_pntr ',(select count(1) from DBO.TMP_LAB_TEST_final_root_ordered_test_pntr with(nolock)));






--select top 10 * from dbo.TMP_LAB_TEST_final_root_ordered_test_pntr;

drop table if exists dbo.TMP_LAB_TEST_final ;
select  
lt1.*,lto.*, ltmi.root_ordered_test_pntr_merge, ltmi.ACCESSION_NBR_merge, ltmi.LAB_RPT_CREATED_BY_merge, ltmi.ELR_IND1 as ELR_IND1, ltmi.record_status_cd_merge
--lt1.*,lto.*, ltmi.* 
into  dbo.TMP_LAB_TEST_final
 from  dbo.TMP_LAB_TEST_final_root_ordered_test_pntr lt1
 left outer join  dbo.TMP_LAB_TEST  lto   on lt1.LAB_TEST_ptnr = lto.root_ordered_test_pntr
 left outer join  dbo.TMP_Merge_Order  ltmi  on lt1.LAB_TEST_ptnr = ltmi.root_ordered_test_pntr_merge
;

update dbo.TMP_LAB_TEST_final
set ELR_IND = ELR_IND1
where ELR_IND1 is not null
;
 
update dbo.TMP_LAB_TEST_final
set record_status_cd = record_status_cd_merge
where record_status_cd_merge is not null
;
 
--alter table  dbo.TMP_LAB_TEST_final drop column  ELR_IND1;

create index complex_index on dbo.TMP_LAB_TEST_final(root_ordered_Test_pntr, LAB_TEST_pntr);

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 46,' GENERATING TMP_LAB_TEST_final',(select count(1) from DBO.TMP_LAB_TEST_final with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow5 -rest of them </name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>741ccec8-4018-3bcb-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>-248.0</y>
                            </position>
                            <versionedComponentId>5ea98913-59c6-3954-9dc7-51f99ec0db27</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
drop table if exists dbo.TMP_LAB_TEST2 ;


select tst.*,
 obs.Cd_desc_txt 'Root_Ordered_Test_Nm' 
into dbo.TMP_LAB_TEST2
from dbo.TMP_LAB_TEST1_final_order as tst
  left outer join nbs_odse..observation as obs on  tst.root_ordered_test_pntr = obs.observation_uid
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 39,' GENERATING TMP_LAB_TEST2 ',(select count(1) from DBO.TMP_LAB_TEST2 with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow1</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>8d56bbe5-d084-305b-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>-96.0</y>
                            </position>
                            <versionedComponentId>6b1306da-533f-310f-8076-067dbc71fcfd</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_LAB_TEST3;

select tst.*, obs.Cd_desc_txt 'Parent_Test_Nm' 
into dbo.TMP_LAB_TEST3
from   dbo.TMP_LAB_TEST2 as tst  
   left outer join nbs_odse..observation as obs on tst.parent_test_pntr = obs.observation_uid
;


create index idx_LAB_TEST_uid on dbo.TMP_LAB_TEST3(LAB_TEST_uid);
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 40,' GENERATING TMP_LAB_TEST3 ',(select count(1) from DBO.TMP_LAB_TEST3 with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow2</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>9fd8c7c9-6a9b-33c2-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>240.0</y>
                            </position>
                            <versionedComponentId>7ba36d58-b5a7-3b44-a416-90e6161829c1</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_order_test ; 
select OID_CHECK as oid , root_ordered_test_pntr 
into dbo.TMP_order_test
from dbo.TMP_LAB_TEST4 
where LAB_TEST_Type = 'Order' and OID_CHECK &lt;&gt; 4
;


create index idx_root_ordered_test_pntr on dbo.TMP_LAB_TEST4(root_ordered_test_pntr);
create index idx_root_ordered_test_pntr on dbo.TMP_order_test(root_ordered_test_pntr);


alter table dbo.TMP_LAB_TEST4 drop column [oid];

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 42,' GENERATING TMP_order_test ',(select count(1) from DBO.TMP_order_test with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow4</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                        <processors>
                            <id>a368642c-130c-3719-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>696.0</y>
                            </position>
                            <versionedComponentId>4b22de27-e1b9-3459-a325-722aff34bf5e</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Log Level</key>
        <value>
            <name>Log Level</name>
        </value>
    </entry>
    <entry>
        <key>Log Payload</key>
        <value>
            <name>Log Payload</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Log</key>
        <value>
            <name>Attributes to Log</name>
        </value>
    </entry>
    <entry>
        <key>attributes-to-log-regex</key>
        <value>
            <name>attributes-to-log-regex</name>
        </value>
    </entry>
    <entry>
        <key>Attributes to Ignore</key>
        <value>
            <name>Attributes to Ignore</name>
        </value>
    </entry>
    <entry>
        <key>attributes-to-ignore-regex</key>
        <value>
            <name>attributes-to-ignore-regex</name>
        </value>
    </entry>
    <entry>
        <key>Log FlowFile Properties</key>
        <value>
            <name>Log FlowFile Properties</name>
        </value>
    </entry>
    <entry>
        <key>Output Format</key>
        <value>
            <name>Output Format</name>
        </value>
    </entry>
    <entry>
        <key>Log prefix</key>
        <value>
            <name>Log prefix</name>
        </value>
    </entry>
    <entry>
        <key>character-set</key>
        <value>
            <name>character-set</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Log Level</key>
        <value>info</value>
    </entry>
    <entry>
        <key>Log Payload</key>
        <value>false</value>
    </entry>
    <entry>
        <key>Attributes to Log</key>
    </entry>
    <entry>
        <key>attributes-to-log-regex</key>
        <value>.*</value>
    </entry>
    <entry>
        <key>Attributes to Ignore</key>
    </entry>
    <entry>
        <key>attributes-to-ignore-regex</key>
    </entry>
    <entry>
        <key>Log FlowFile Properties</key>
        <value>true</value>
    </entry>
    <entry>
        <key>Output Format</key>
        <value>Line per Attribute</value>
    </entry>
    <entry>
        <key>Log prefix</key>
    </entry>
    <entry>
        <key>character-set</key>
        <value>UTF-8</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>25</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>LogAttribute</name>
                            <relationships>
<autoTerminate>true</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style/>
                            <type>org.apache.nifi.processors.standard.LogAttribute</type>
                        </processors>
                        <processors>
                            <id>b07b3d22-98ba-3620-0000-000000000000</id>
                            <parentGroupId>e77ad3c3-81d0-3965-0000-000000000000</parentGroupId>
                            <position>
<x>-64.0</x>
<y>64.0</y>
                            </position>
                            <versionedComponentId>6ee80923-13f5-3fa8-a14f-7a4c43911158</versionedComponentId>
                            <bundle>
<artifact>nifi-standard-nar</artifact>
<group>org.apache.nifi</group>
<version>1.18.0</version>
                            </bundle>
                            <config>
<backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
<bulletinLevel>WARN</bulletinLevel>
<comments></comments>
<concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
<descriptors>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>
            <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
            <name>Database Connection Pooling Service</name>
        </value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
        <value>
            <name>sql-pre-query</name>
        </value>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>
            <name>SQL select query</name>
        </value>
    </entry>
    <entry>
        <key>sql-post-query</key>
        <value>
            <name>sql-post-query</name>
        </value>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>
            <name>Max Wait Time</name>
        </value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>
            <name>dbf-normalize</name>
        </value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>
            <name>dbf-user-logical-types</name>
        </value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>
            <name>compression-format</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>
            <name>dbf-default-precision</name>
        </value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>
            <name>dbf-default-scale</name>
        </value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>
            <name>esql-max-rows</name>
        </value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>
            <name>esql-output-batch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>
            <name>esql-fetch-size</name>
        </value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>
            <name>esql-auto-commit</name>
        </value>
    </entry>
</descriptors>
<executionNode>ALL</executionNode>
<lossTolerant>false</lossTolerant>
<maxBackoffPeriod>10 mins</maxBackoffPeriod>
<penaltyDuration>30 sec</penaltyDuration>
<properties>
    <entry>
        <key>Database Connection Pooling Service</key>
        <value>97d7b5ba-44fb-398d-0000-000000000000</value>
    </entry>
    <entry>
        <key>sql-pre-query</key>
    </entry>
    <entry>
        <key>SQL select query</key>
        <value>drop table if exists dbo.TMP_LAB_TEST4 ; 

select tst.oid as OID_CHECK ,tst.*,
obs.add_time as SPECIMEN_ADD_TIME,
obs1.last_chg_time as SPECIMEN_LAST_CHANGE_TIME
into dbo.TMP_LAB_TEST4
from dbo.TMP_LAB_TEST3 as tst
left join nbs_odse..observation as obs	on tst.LAB_TEST_uid = obs.observation_uid 	and obs.obs_domain_cd_st_1 = 'Order'  
left join nbs_odse..observation as obs1	on tst.LAB_TEST_uid = obs1.observation_uid  and obs1.obs_domain_cd_st_1 = 'Order'  
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 41,' GENERATING TMP_LAB_TEST4 ',(select count(1) from DBO.TMP_LAB_TEST4 with(nolock)));
</value>
    </entry>
    <entry>
        <key>sql-post-query</key>
    </entry>
    <entry>
        <key>Max Wait Time</key>
        <value>0 seconds</value>
    </entry>
    <entry>
        <key>dbf-normalize</key>
        <value>false</value>
    </entry>
    <entry>
        <key>dbf-user-logical-types</key>
        <value>false</value>
    </entry>
    <entry>
        <key>compression-format</key>
        <value>NONE</value>
    </entry>
    <entry>
        <key>dbf-default-precision</key>
        <value>10</value>
    </entry>
    <entry>
        <key>dbf-default-scale</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-max-rows</key>
        <value>1</value>
    </entry>
    <entry>
        <key>esql-output-batch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-fetch-size</key>
        <value>0</value>
    </entry>
    <entry>
        <key>esql-auto-commit</key>
        <value>true</value>
    </entry>
</properties>
<retryCount>10</retryCount>
<runDurationMillis>0</runDurationMillis>
<schedulingPeriod>0 sec</schedulingPeriod>
<schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
<yieldDuration>1 sec</yieldDuration>
                            </config>
                            <executionNodeRestricted>false</executionNodeRestricted>
                            <name>flow3</name>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>failure</name>
<retry>false</retry>
                            </relationships>
                            <relationships>
<autoTerminate>false</autoTerminate>
<name>success</name>
<retry>false</retry>
                            </relationships>
                            <state>STOPPED</state>
                            <style>
<entry>
    <key>background-color</key>
    <value>#5db09a</value>
</entry>
                            </style>
                            <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                        </processors>
                    </contents>
                    <defaultBackPressureDataSizeThreshold>1 GB</defaultBackPressureDataSizeThreshold>
                    <defaultBackPressureObjectThreshold>10000</defaultBackPressureObjectThreshold>
                    <defaultFlowFileExpiration>0 sec</defaultFlowFileExpiration>
                    <flowfileConcurrency>SINGLE_BATCH_PER_NODE</flowfileConcurrency>
                    <flowfileOutboundPolicy>BATCH_OUTPUT</flowfileOutboundPolicy>
                    <name>Parallel_03 (Step6 cont.,)</name>
                    <variables/>
                </processGroups>
                <processors>
                    <id>051e0a73-c7c1-3bbc-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>-256.0</x>
                        <y>8.0</y>
                    </position>
                    <versionedComponentId>f60c1a4b-563a-3842-9d07-383d1ff831f6</versionedComponentId>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.18.0</version>
                    </bundle>
                    <config>
                        <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>
    <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
    <name>Database Connection Pooling Service</name>
</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
<value>
    <name>sql-pre-query</name>
</value>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>
    <name>SQL select query</name>
</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
<value>
    <name>sql-post-query</name>
</value>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>
    <name>Max Wait Time</name>
</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>
    <name>dbf-normalize</name>
</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>
    <name>dbf-user-logical-types</name>
</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>
    <name>compression-format</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>
    <name>dbf-default-precision</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>
    <name>dbf-default-scale</name>
</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>
    <name>esql-max-rows</name>
</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>
    <name>esql-output-batch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>
    <name>esql-fetch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>
    <name>esql-auto-commit</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <maxBackoffPeriod>10 mins</maxBackoffPeriod>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>97d7b5ba-44fb-398d-0000-000000000000</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
<value>INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 1,'SP_Start',0);
</value>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>--STEP 1
drop table if exists dbo.TMP_updated_observation_List;
select * 
into dbo.TMP_updated_observation_List
 from rdb..updated_observation_List 
 --where OBSERVATION_UID between 100000000 and 100010000; ---temp (rakhesh : remove this later)
--74,037,040 records
--select count(1) from dbo.TMP_updated_observation_List where OBSERVATION_UID between 100000000 and 100010000;
create index idx_TMP_updated_observation_List_oid on dbo.TMP_updated_observation_List(OBSERVATION_UID);
</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
<value>INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 2,' GENERATING TMP_updated_observation_List ',(select count(1) from DBO.TMP_updated_observation_List with(nolock)));
</value>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>0 seconds</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>false</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>false</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>NONE</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>10</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>true</value>
                            </entry>
                        </properties>
                        <retryCount>10</retryCount>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>step1</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>failure</name>
                        <retry>false</retry>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                        <retry>false</retry>
                    </relationships>
                    <state>STOPPED</state>
                    <style>
                        <entry>
                            <key>background-color</key>
                            <value>#12e635</value>
                        </entry>
                    </style>
                    <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                </processors>
                <processors>
                    <id>2b3e4086-5d58-31e2-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>256.0</x>
                        <y>680.0</y>
                    </position>
                    <versionedComponentId>c0cc16bf-5930-3dc9-bf85-0eea2432984b</versionedComponentId>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.18.0</version>
                    </bundle>
                    <config>
                        <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>
    <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
    <name>Database Connection Pooling Service</name>
</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
<value>
    <name>sql-pre-query</name>
</value>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>
    <name>SQL select query</name>
</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
<value>
    <name>sql-post-query</name>
</value>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>
    <name>Max Wait Time</name>
</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>
    <name>dbf-normalize</name>
</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>
    <name>dbf-user-logical-types</name>
</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>
    <name>compression-format</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>
    <name>dbf-default-precision</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>
    <name>dbf-default-scale</name>
</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>
    <name>esql-max-rows</name>
</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>
    <name>esql-output-batch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>
    <name>esql-fetch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>
    <name>esql-auto-commit</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <maxBackoffPeriod>10 mins</maxBackoffPeriod>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>97d7b5ba-44fb-398d-0000-000000000000</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>drop table if exists dbo.TMP_LAB_TEST1_uid;
select * into dbo.TMP_LAB_TEST1_uid from (
 select  LAB_TEST_uid_OTH AS LAB_TEST_uid from  dbo.TMP_LAB_TEST_oth  union
 select LAB_TEST_uid_mat  AS LAB_TEST_uid from  dbo.TMP_LAB_TEST_mat_init  union 
 select LAB_TEST_uid_test AS LAB_TEST_uid from  dbo.TMP_LAB_TESTinit  
) a
 ; 

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 23,' GENERATING TMP_LAB_TEST1_uid ',(select count(1) from DBO.TMP_LAB_TEST1_uid with(nolock)));







drop table if exists dbo.TMP_LAB_TEST1_TMP ;

select  lt1.*,lto.*,ltmi.*,lti.*, lti.Lab_Rpt_Uid as Lab_Rpt_Uid_Test1
into  dbo.TMP_LAB_TEST1_TMP
from dbo.TMP_LAB_TEST1_uid lt1
  left outer join  dbo.TMP_LAB_TEST_oth  lto on lt1.LAB_TEST_uid = lto.LAB_TEST_uid_oth
  left outer join  dbo.TMP_LAB_TEST_mat_init  ltmi  on lt1.LAB_TEST_uid = ltmi.LAB_TEST_uid_mat
  left outer join  dbo.TMP_LAB_TESTinit  lti on lt1.LAB_TEST_uid = lti.LAB_TEST_uid_Test
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 24,' GENERATING TMP_LAB_TEST1_TMP ',(select count(1) from DBO.TMP_LAB_TEST1_TMP with(nolock)));

  



drop table if exists dbo.TMP_LabReportMorb;
select * 
  into dbo.TMP_LabReportMorb
  from dbo.TMP_LAB_TEST1_TMP
 where  LAB_TEST_type in ('Order', 'Result', 'Order_rslt') and  [oid]=4
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 25,' GENERATING TMP_LabReportMorb ',(select count(1) from DBO.TMP_LabReportMorb with(nolock)));
 

drop table if exists dbo.TMP_Morb_OID ;
select l.*, 
o.PROGRAM_JURISDICTION_OID as Morb_oid,
l.Lab_Rpt_Uid_Test1 as Lab_Rpt_Uid_Mor,
l.LAB_TEST_uid as LAB_TEST_uid_mor ,
l.LAB_TEST_uid_oth as LAB_TEST_uid_oth_mor
into  dbo.TMP_Morb_OID
from dbo.TMP_LabReportMorb l,
 nbs_odse..act_relationship ar, 
 nbs_odse..observation o 
where ar.source_act_uid = l.Lab_Rpt_Uid_Test1 
and ar.target_act_uid = o.observation_uid 
and o.CTRL_CD_DISPLAY_FORM = 'MorbReport'
;

ALTER TABLE dbo.TMP_Morb_OID DROP COLUMN Lab_Rpt_Uid_Test1,LAB_TEST_uid,LAB_TEST_uid_oth ;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 26,' GENERATING TMP_Morb_OID ',(select count(1) from DBO.TMP_Morb_OID with(nolock)));








drop table if exists dbo.TMP_LAB_TEST1_uid2;

select  lab_rpt_uid_mor as   lab_rpt_uid
into dbo.TMP_LAB_TEST1_uid2
   from  dbo.TMP_Morb_OID  union
 select Lab_Rpt_Uid_Test1  from  dbo.TMP_LAB_TEST1_TMP
  ; 
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 27,' GENERATING TMP_LAB_TEST1_uid2 ',(select count(1) from DBO.TMP_LAB_TEST1_uid2 with(nolock)));


drop table if exists dbo.TMP_LAB_TEST1 ;
select  lt1.lab_rpt_uid as lab_rpt_uid0,lto.*,tmo.Morb_oid,Cast (null as  [varchar](100)) as PROCESSING_DECISION_DESC
into  dbo.TMP_LAB_TEST1
from  dbo.TMP_LAB_TEST1_uid2 lt1
 left outer join  dbo.TMP_LAB_TEST1_TMP  lto on lt1.lab_rpt_uid = lto.Lab_Rpt_Uid_Test1
 left outer join  dbo.TMP_Morb_OID  tmo on lt1.lab_rpt_uid = tmo.lab_rpt_uid_mor
;

 update dbo.TMP_LAB_TEST1
 set [oid]= morb_oid
 where rtrim(morb_oid) is not null
 ;

update dbo.TMP_LAB_TEST1 
   set dbo.TMP_LAB_TEST1.PROCESSING_DECISION_DESC = cvg.[code_short_desc_txt]
from nbs_srte..Code_value_general cvg,
  dbo.TMP_LAB_TEST1 tlt1
 where cvg.code_set_nm = 'STD_NBS_PROCESSING_DECISION_ALL' 
  and   tlt1.PROCESSING_DECISION_CD = cvg.code
   and   tlt1.PROCESSING_DECISION_CD is not null
 ;


update dbo.TMP_LAB_TEST1 
   set PROCESSING_DECISION_DESC = PROCESSING_DECISION_CD
   WHERE PROCESSING_DECISION_CD is not null 
AND PROCESSING_DECISION_DESC IS NULL
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 28,' GENERATING TMP_LAB_TEST1 ',(select count(1) from DBO.TMP_LAB_TEST1 with(nolock)));

/**********************************/
/* update parent of R_Result */

  




drop table if exists dbo.TMP_R_Result_to_R_Order;

-- create table R_Result_to_R_Order as
select act.source_act_uid'LAB_TEST_uid',--as LAB_TEST_uid label='R_Result_uid',
       act.target_act_uid'parent_test_pntr'---as parent_test_pntr label='R_Order_uid'
into  dbo.TMP_R_Result_to_R_Order
from dbo.TMP_LAB_TEST1 as tst,
/*R_Result_to_R_Order*/
nbs_odse..act_relationship as act
where tst.LAB_TEST_uid = act.source_act_uid
/*and act.type_cd = 'COMP'*/
and act.target_class_cd ='OBS'
and act.source_class_cd ='OBS'
 and tst.LAB_TEST_type IN ('R_Result', 'I_Result')
;


/* update root of R_Result */
 
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 29,' GENERATING TMP_R_Result_to_R_Order ',(select count(1) from DBO.TMP_R_Result_to_R_Order with(nolock)));








drop table if exists dbo.TMP_R_Result_to_R_Order_to_Order;

-- create table R_Result_to_R_Order_to_Order as
select tst.*,
  coalesce(tst2.record_status_cd, tst3.record_status_cd, tst4.record_status_cd ) as record_status_cd_for_result_drug ,
  act2.target_act_uid as root_thru_srpt, 
  act3.target_act_uid as root_thru_refr,
  coalesce(act2.target_act_uid, act4.target_act_uid) as root_ordered_test_pntr -- VS label='Order uid'
into dbo.TMP_R_Result_to_R_Order_to_Order
from dbo.TMP_R_Result_to_R_Order as tst
/*R_Order to Order */
left join nbs_odse..act_relationship as act2 on tst.parent_test_pntr = act2.source_act_uid
and act2.type_cd = 'SPRT'
and act2.target_class_cd = 'OBS'
and act2.source_class_cd ='OBS'
left join dbo.TMP_LAB_TEST1 as tst2 on   tst2.LAB_TEST_uid = act2.target_act_uid

/*R_Order to Result to Order */
left join nbs_odse..act_relationship as act3 on tst.parent_test_pntr  = act3.source_act_uid and act3.type_cd = 'REFR' and act3.target_class_cd = 'OBS' and act3.source_class_cd ='OBS'
left join dbo.TMP_LAB_TEST1          as tst3 on tst3.LAB_TEST_uid = act3.target_act_uid
left join nbs_odse..act_relationship  as act4 on act3.target_act_uid = act4.source_act_uid
and act4.type_cd = 'COMP'
and act4.target_class_cd = 'OBS'
and act4.source_class_cd ='OBS'
left join dbo.TMP_LAB_TEST1 as tst4 on   tst4.LAB_TEST_uid = act4.target_act_uid
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 30,' GENERATING TMP_R_Result_to_R_Order_to_Order ',(select count(1) from DBO.TMP_R_Result_to_R_Order_to_Order with(nolock)));








drop table if exists dbo.TMP_LAB_TEST1_testuid;


select lt1.LAB_TEST_uid
into dbo.TMP_LAB_TEST1_testuid
from dbo.TMP_LAB_TEST1 lt1
union
select rrr.LAB_TEST_uid
from dbo.TMP_R_Result_to_R_Order_to_Order rrr
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 31,' GENERATING TMP_LAB_TEST1_testuid ',(select count(1) from DBO.TMP_LAB_TEST1_testuid with(nolock)));







drop table if exists dbo.TMP_LAB_TEST1_final;

select dimc.LAB_TEST_uid as LAB_TEST_uid_final,
tlt1.*,
trr.[record_status_cd_for_result_drug] ,
trr.[root_thru_srpt] ,
trr.[root_thru_refr] ,
   coalesce(trr.parent_test_pntr,tlt1.parent_test_pntr) as parent_test_pntr1, 
   coalesce(trr.root_ordered_test_pntr,tlt1.root_ordered_test_pntr) as root_ordered_test_pntr1
into dbo.TMP_LAB_TEST1_final
from dbo.TMP_LAB_TEST1_testuid DIMC
  LEFT OUTER JOIN   dbo.TMP_LAB_TEST1 tlt1 ON  tlt1.LAB_TEST_uid  =  dimc.LAB_TEST_uid
  LEFT OUTER JOIN   dbo.TMP_R_Result_to_R_Order_to_Order trr ON  trr.LAB_TEST_uid  =  dimc.LAB_TEST_uid
;

   update dbo.TMP_LAB_TEST1_final
   set  parent_test_pntr = parent_test_pntr1,
   root_ordered_test_pntr = root_ordered_test_pntr1
   ;

/* update root order test and parent of R_Order */
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 32,' GENERATING TMP_LAB_TEST1_final ',(select count(1) from DBO.TMP_LAB_TEST1_final with(nolock)));




drop table if exists dbo.TMP_R_Order_to_Result;


select act.source_act_uid as LAB_TEST_uid ,--label='R_Order_uid',
act.target_act_uid as parent_test_pntr, --label='Result_uid',
act2.target_act_uid as root_ordered_test_pntr, --label='Order uid',
tst2.record_status_cd as record_status_cd --label='record_status_cd_for_result'
into dbo.TMP_R_Order_to_Result
from dbo.TMP_LAB_TEST1_final as tst,
dbo.TMP_LAB_TEST1_final as tst2,
nbs_odse..act_relationship as act,
nbs_odse..act_relationship as act2
where tst.LAB_TEST_type IN( 'R_Order','I_Order')
and tst.LAB_TEST_uid = act.source_act_uid
and act.type_cd = 'REFR'
and act.target_class_cd ='OBS'
and act.source_class_cd ='OBS'
and act.target_act_uid = act2.source_act_uid
and act2.type_cd = 'COMP'
and act2.target_class_cd ='OBS'
and act2.source_class_cd ='OBS'
and tst2.LAB_TEST_uid = act2.target_act_uid
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 33,' GENERATING TMP_R_Order_to_Result ',(select count(1) from DBO.TMP_R_Order_to_Result with(nolock)));







drop table if exists dbo.TMP_LAB_TEST1_final_testuid;

select lt1.LAB_TEST_uid
into dbo.TMP_LAB_TEST1_final_testuid
from dbo.TMP_LAB_TEST1_final lt1
union
select rrr.LAB_TEST_uid
from dbo.TMP_R_Order_to_Result rrr
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 34,' GENERATING TMP_LAB_TEST1_final_testuid ',(select count(1) from DBO.TMP_LAB_TEST1_final_testuid with(nolock)));







drop table if exists dbo.TMP_LAB_TEST1_final_result;
select dimc.LAB_TEST_uid as LAB_TEST_uid_final_result,
tlt1.*,
coalesce(trr.[record_status_cd], tlt1.[record_status_cd]) as record_status_cd2,
   coalesce(trr.parent_test_pntr,tlt1.parent_test_pntr) as parent_test_pntr2, 
   coalesce(trr.root_ordered_test_pntr,tlt1.root_ordered_test_pntr) as root_ordered_test_pntr2
into dbo.TMP_LAB_TEST1_final_result
from dbo.TMP_LAB_TEST1_final_testuid DIMC
  LEFT OUTER JOIN   dbo.TMP_LAB_TEST1_final tlt1 ON  tlt1.LAB_TEST_uid  =  dimc.LAB_TEST_uid
  LEFT OUTER JOIN   dbo.TMP_R_Order_to_Result trr ON  trr.LAB_TEST_uid  =  dimc.LAB_TEST_uid
;

   update dbo.TMP_LAB_TEST1_final_result
   set record_status_cd = record_status_cd2,
   parent_test_pntr = parent_test_pntr2,
   root_ordered_test_pntr = root_ordered_test_pntr2
   ;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 35,' GENERATING TMP_LAB_TEST1_final_result ',(select count(1) from DBO.TMP_LAB_TEST1_final_result with(nolock)));





drop table if exists dbo.TMP_Result_to_Order;

select act.source_act_uid as LAB_TEST_uid ,--label='Result_uid',
act.target_act_uid as parent_test_pntr ,--label='Order_uid',
act.target_act_uid as root_ordered_test_pntr ,--label='Order uid',
tst2.record_status_cd as record_status_cd --label='record_status_cd_for_result'
into  dbo.TMP_Result_to_Order
from dbo.TMP_LAB_TEST1_final_result as tst,
dbo.TMP_LAB_TEST1_final_result as tst2,
nbs_odse..act_relationship as act
where tst.LAB_TEST_uid = act.source_act_uid
and tst.LAB_TEST_type in ('Result', 'Order_rslt')
and act.type_cd = 'COMP'
and act.target_class_cd ='OBS'
and act.source_class_cd ='OBS'
and tst2.LAB_TEST_uid = act.target_act_uid
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 36,' GENERATING TMP_Result_to_Order ',(select count(1) from DBO.TMP_Result_to_Order with(nolock)));








drop table if exists dbo.TMP_LAB_TEST1_final_orderuid;


select lt1.LAB_TEST_uid
into dbo.TMP_LAB_TEST1_final_orderuid
from dbo.TMP_LAB_TEST1_final_result lt1
union
select rrr.LAB_TEST_uid
from dbo.TMP_Result_to_Order rrr
;
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 37,' GENERATING TMP_LAB_TEST1_final_orderuid ',(select count(1) from DBO.TMP_LAB_TEST1_final_orderuid with(nolock)));

 create index idx_TMP_LAB_TEST1_final_orderuid  on dbo.TMP_LAB_TEST1_final_orderuid (LAB_TEST_uid) ;
 
 create index idx_TMP_LAB_TEST1_final_result_uid on  dbo.TMP_LAB_TEST1_final_result(LAB_TEST_uid) ;

 create index idx_TMP_Result_to_Order_uid on  dbo.TMP_Result_to_Order(LAB_TEST_uid) ;
  

drop table if exists dbo.TMP_LAB_TEST1_final_order;
select distinct dimc.LAB_TEST_uid as LAB_TEST_uid_final_order,
tlt1.*,
coalesce( trr.[record_status_cd],tlt1.[record_status_cd]) as record_status_cd3,
   coalesce(trr.parent_test_pntr,tlt1.parent_test_pntr) as parent_test_pntr3, 
   coalesce(trr.root_ordered_test_pntr,tlt1.root_ordered_test_pntr) as root_ordered_test_pntr3
into dbo.TMP_LAB_TEST1_final_order
from dbo.TMP_LAB_TEST1_final_orderuid DIMC
  LEFT OUTER JOIN  dbo.TMP_LAB_TEST1_final_result tlt1 ON  tlt1.LAB_TEST_uid  =  dimc.LAB_TEST_uid
  LEFT OUTER JOIN  dbo.TMP_Result_to_Order trr ON  trr.LAB_TEST_uid  =  dimc.LAB_TEST_uid
;

   update dbo.TMP_LAB_TEST1_final_order
   set record_status_cd = record_status_cd3,
   parent_test_pntr = parent_test_pntr3,
   root_ordered_test_pntr = root_ordered_test_pntr3
;


   update dbo.TMP_LAB_TEST1_final_order
   set parent_test_pntr = LAB_TEST_pntr,
   root_ordered_test_pntr = LAB_TEST_pntr
where LAB_TEST_type = 'Order'
;

/****creating Root_Ordered_Test_Nm column in LAB_TEST***/

create index idx_root_ordered_test_pntr on dbo.TMP_LAB_TEST1_final_order(root_ordered_test_pntr);

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 38,' GENERATING TMP_LAB_TEST1_final_order ',(select count(1) from DBO.TMP_LAB_TEST1_final_order with(nolock)));

--create index idx_TMP_LAB_TEST1_final_order_pntr on  dbo.TMP_LAB_TEST1_final_order(root_ordered_test_pntr);


</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>0 seconds</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>false</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>false</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>NONE</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>10</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>true</value>
                            </entry>
                        </properties>
                        <retryCount>10</retryCount>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>Step6</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>failure</name>
                        <retry>false</retry>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                        <retry>false</retry>
                    </relationships>
                    <state>STOPPED</state>
                    <style>
                        <entry>
                            <key>background-color</key>
                            <value>#17e821</value>
                        </entry>
                    </style>
                    <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                </processors>
                <processors>
                    <id>38a55cbe-d117-345e-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>-272.0</x>
                        <y>1184.0</y>
                    </position>
                    <versionedComponentId>4bc61d9c-cc1c-33bd-9e97-5adb3f6969a3</versionedComponentId>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.18.0</version>
                    </bundle>
                    <config>
                        <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Log Level</key>
<value>
    <name>Log Level</name>
</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>
    <name>Log Payload</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
<value>
    <name>Attributes to Log</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>
    <name>attributes-to-log-regex</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
<value>
    <name>Attributes to Ignore</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
<value>
    <name>attributes-to-ignore-regex</name>
</value>
                            </entry>
                            <entry>
<key>Log FlowFile Properties</key>
<value>
    <name>Log FlowFile Properties</name>
</value>
                            </entry>
                            <entry>
<key>Output Format</key>
<value>
    <name>Output Format</name>
</value>
                            </entry>
                            <entry>
<key>Log prefix</key>
<value>
    <name>Log prefix</name>
</value>
                            </entry>
                            <entry>
<key>character-set</key>
<value>
    <name>character-set</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <maxBackoffPeriod>10 mins</maxBackoffPeriod>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Log Level</key>
<value>info</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>.*</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
                            </entry>
                            <entry>
<key>Log FlowFile Properties</key>
<value>true</value>
                            </entry>
                            <entry>
<key>Output Format</key>
<value>Line per Attribute</value>
                            </entry>
                            <entry>
<key>Log prefix</key>
                            </entry>
                            <entry>
<key>character-set</key>
<value>UTF-8</value>
                            </entry>
                        </properties>
                        <retryCount>10</retryCount>
                        <runDurationMillis>25</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>LogAttribute</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>success</name>
                        <retry>false</retry>
                    </relationships>
                    <state>STOPPED</state>
                    <style>
                        <entry>
                            <key>background-color</key>
                            <value>#e8e582</value>
                        </entry>
                    </style>
                    <type>org.apache.nifi.processors.standard.LogAttribute</type>
                </processors>
                <processors>
                    <id>5d10842e-86dd-328a-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>248.0</x>
                        <y>1192.0</y>
                    </position>
                    <versionedComponentId>514acc64-079d-32bb-b7bd-2c36119ad6f2</versionedComponentId>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.18.0</version>
                    </bundle>
                    <config>
                        <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>
    <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
    <name>Database Connection Pooling Service</name>
</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
<value>
    <name>sql-pre-query</name>
</value>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>
    <name>SQL select query</name>
</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
<value>
    <name>sql-post-query</name>
</value>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>
    <name>Max Wait Time</name>
</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>
    <name>dbf-normalize</name>
</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>
    <name>dbf-user-logical-types</name>
</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>
    <name>compression-format</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>
    <name>dbf-default-precision</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>
    <name>dbf-default-scale</name>
</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>
    <name>esql-max-rows</name>
</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>
    <name>esql-output-batch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>
    <name>esql-fetch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>
    <name>esql-auto-commit</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <maxBackoffPeriod>10 mins</maxBackoffPeriod>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>97d7b5ba-44fb-398d-0000-000000000000</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>drop table if exists dbo.TMP_L_LAB_TEST_N;
CREATE TABLE [dbo].tmp_L_LAB_TEST_N
(
[LAB_TEST_id]  [int] IDENTITY(1,1) NOT NULL,
 [LAB_TEST_UID] [numeric](20, 0) NULL,
[LAB_TEST_KEY] [numeric](18, 0) NULL
 ) ON [PRIMARY]
 ;

insert into dbo.tmp_L_LAB_TEST_N([LAB_TEST_UID])
SELECT DISTINCT tlt.LAB_TEST_UID 
  FROM dbo.TMP_LAB_TEST_final tlt
EXCEPT 
SELECT lt.LAB_TEST_UID 
FROM rdb..LAB_TEST lt
;

UPDATE dbo.TMP_L_LAB_TEST_N 
   SET LAB_TEST_KEY= LAB_TEST_ID + coalesce((SELECT MAX(LAB_TEST_KEY) FROM RDB.dbo.L_LAB_TEST),0)
;

DELETE FROM dbo.TMP_L_LAB_TEST_N WHERE LAB_TEST_UID IS NULL;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 47,' GENERATING tmp_L_LAB_TEST_N ',(select count(1) from DBO.tmp_L_LAB_TEST_N with(nolock)));



INSERT INTO dbo.L_LAB_TEST  (LAB_TEST_KEY,LAB_TEST_UID)
SELECT[LAB_TEST_KEY],  [LAB_TEST_UID]  FROM dbo.TMP_L_LAB_TEST_N
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 48,'INSERTING INTO L_LAB_TEST',(select count(1) from DBO.L_LAB_TEST with(nolock)));

create index idx_tmp_L_LAB_TEST_N_uid1 on dbo.TMP_L_LAB_TEST_N(LAB_TEST_UID);
create index idx_TMP_LAB_TEST_final_uid1 on dbo.TMP_LAB_TEST_final(LAB_TEST_UID);



drop table if exists dbo.TMP_D_LAB_TEST_N;

SELECT distinct  lt.* , ltn.[LAB_TEST_KEY]
INTO dbo.TMP_D_LAB_TEST_N
  FROM dbo.TMP_LAB_TEST_final  lt, 
   dbo.TMP_L_LAB_TEST_N ltn
 WHERE lt.LAB_TEST_UID=ltn.LAB_TEST_UID
;
--select ACCESSION_NBR_merge, * from dbo.TMP_D_LAB_TEST_N;   select ACCESSION_NBR_merge,CLINICAL_INFORMATION, REASON_FOR_TEST_DESC,REASON_FOR_TEST_CD from dbo.TMP_D_LAB_TEST_N
 --UPDATE  dbo.TMP_D_LAB_TEST_N  SET JURISDICTION_NM = NULL  where JURISDICTION_NM = '' ; ---why are we updaing when we are dropping the colum
 
 UPDATE  dbo.TMP_D_LAB_TEST_N  SET [ACCESSION_NBR_merge] = NULL  where [ACCESSION_NBR_merge] = '' ;

-- UPDATE  dbo.TMP_D_LAB_TEST_N  SET [SPECIMEN_DESC] = NULL  where [SPECIMEN_DESC] = '' ;
   
-- UPDATE  dbo.TMP_D_LAB_TEST_N  SET [SPECIMEN_SRC] = NULL  where [SPECIMEN_SRC] = '' ;

 UPDATE  dbo.TMP_D_LAB_TEST_N  SET [CLINICAL_INFORMATION] = NULL  where [CLINICAL_INFORMATION] = '' ;
  
 UPDATE  dbo.TMP_D_LAB_TEST_N  SET REASON_FOR_TEST_DESC = NULL  where REASON_FOR_TEST_DESC = '' ;
  
 UPDATE  dbo.TMP_D_LAB_TEST_N  SET REASON_FOR_TEST_CD = NULL  where REASON_FOR_TEST_CD = '' ;
  
  

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 49,' GENERATING TMP_D_LAB_TEST_N ',(select count(1) from DBO.TMP_D_LAB_TEST_N with(nolock)));






---INSERT into LAB_TEST
insert into dbo.LAB_TEST
 (
 [LAB_TEST_STATUS]
  ,[LAB_TEST_KEY]
  ,[LAB_RPT_LOCAL_ID]
  ,[TEST_METHOD_CD]
  ,[TEST_METHOD_CD_DESC]
  ,[LAB_RPT_SHARE_IND]
  ,[LAB_TEST_CD]
  ,[ELR_IND]
  ,[LAB_RPT_UID]
  ,[LAB_TEST_CD_DESC]
  ,[INTERPRETATION_FLG]
  ,[LAB_RPT_RECEIVED_BY_PH_DT]
  ,[LAB_RPT_CREATED_BY]
  ,[REASON_FOR_TEST_DESC]
  ,[REASON_FOR_TEST_CD]
  ,[LAB_RPT_LAST_UPDATE_BY]
  ,[LAB_TEST_DT]
  ,[LAB_RPT_CREATED_DT]
  ,[LAB_TEST_TYPE]
  ,[LAB_RPT_LAST_UPDATE_DT]
  ,[JURISDICTION_CD]
  ,[LAB_TEST_CD_SYS_CD]
  ,[LAB_TEST_CD_SYS_NM]
  ,[JURISDICTION_NM]
  ,[OID]
  ,[ALT_LAB_TEST_CD]
  ,[LAB_RPT_STATUS]
  ,[DANGER_CD_DESC]
  ,ALT_LAB_TEST_CD_DESC
  ,[ACCESSION_NBR]
  ,[SPECIMEN_SRC]
  ,[PRIORITY_CD]
  ,[ALT_LAB_TEST_CD_SYS_CD]
  ,[ALT_LAB_TEST_CD_SYS_NM]
  ,[SPECIMEN_SITE]
  ,[SPECIMEN_DETAILS]
  ,[DANGER_CD]
  ,[SPECIMEN_COLLECTION_VOL]
  ,[SPECIMEN_COLLECTION_VOL_UNIT]
  ,[SPECIMEN_DESC]
  ,[SPECIMEN_SITE_DESC]
  ,[CLINICAL_INFORMATION]
  ,[LAB_TEST_UID]
  ,[ROOT_ORDERED_TEST_PNTR]
  ,[PARENT_TEST_PNTR]
  ,[LAB_TEST_PNTR]
  ,[SPECIMEN_ADD_TIME]
  ,[SPECIMEN_LAST_CHANGE_TIME]
  ,[SPECIMEN_COLLECTION_DT]
  ,[SPECIMEN_NM]
  ,[ROOT_ORDERED_TEST_NM]
  ,[PARENT_TEST_NM]
  ,[TRANSCRIPTIONIST_NAME]
  ,[TRANSCRIPTIONIST_ID]
  ,[TRANSCRIPTIONIST_ASS_AUTH_CD]
  ,[TRANSCRIPTIONIST_ASS_AUTH_TYPE]
  ,[ASSISTANT_INTERPRETER_NAME]
  ,[ASSISTANT_INTERPRETER_ID]
  ,[ASSISTANT_INTER_ASS_AUTH_CD]
  ,[ASSISTANT_INTER_ASS_AUTH_TYPE]
  ,[RESULT_INTERPRETER_NAME]
  ,[RECORD_STATUS_CD]
  ,[RDB_LAST_REFRESH_TIME]
  ,[CONDITION_CD]
  ,[PROCESSING_DECISION_CD]
  ,[PROCESSING_DECISION_DESC]
  )
select rtrim( cast( LAB_TEST_STATUS AS varchar(50)))
  ,[LAB_TEST_KEY]
,rtrim( cast( LAB_RPT_LOCAL_ID AS varchar(50)))
,rtrim( cast( TEST_METHOD_CD AS varchar(199)))
,rtrim( cast( TEST_METHOD_CD_DESC AS varchar(199)))
,rtrim( cast( LAB_RPT_SHARE_IND AS varchar(50)))
,rtrim( cast( LAB_TEST_CD AS varchar(1000)))
,rtrim( cast( ELR_IND AS varchar(50)))
  ,[LAB_RPT_UID]
,rtrim( cast( LAB_TEST_CD_DESC AS varchar(2000)))
,rtrim( cast( INTERPRETATION_FLG AS varchar(20)))
  ,[LAB_RPT_RECEIVED_BY_PH_DT]
  ,[LAB_RPT_CREATED_BY_MERGE]
,rtrim( cast( REASON_FOR_TEST_DESC AS varchar(4000)))
,rtrim( cast( REASON_FOR_TEST_CD AS varchar(4000)))
  ,[LAB_RPT_LAST_UPDATE_BY]
  ,[LAB_TEST_DT]
  ,[LAB_RPT_CREATED_DT]
,rtrim( cast( LAB_TEST_TYPE AS varchar(50)))
  ,[LAB_RPT_LAST_UPDATE_DT]
,rtrim( cast( JURISDICTION_CD AS varchar(20)))
,rtrim( cast( LAB_TEST_CD_SYS_CD AS varchar(50)))
,rtrim( cast( LAB_TEST_CD_SYS_NM AS varchar(100)))
,rtrim( cast( JURISDICTION_NM AS varchar(50)))
  ,order_OID
,rtrim( cast( ALT_LAB_TEST_CD AS varchar(50)))
, cast( LAB_RPT_STATUS AS char(1))
,rtrim( cast( DANGER_CD_DESC AS varchar(100)))
,rtrim( cast( ALT_LAB_TEST_CD_DESC AS varchar(1000)))
,rtrim( cast( ACCESSION_NBR_MERGE AS varchar(199)))
,rtrim( cast( SPECIMEN_SRC AS varchar(50)))
,rtrim( cast( PRIORITY_CD AS varchar(20)))
,rtrim( cast( ALT_LAB_TEST_CD_SYS_CD AS varchar(50)))
,rtrim( cast( ALT_LAB_TEST_CD_SYS_NM AS varchar(100)))
,rtrim( cast( SPECIMEN_SITE AS varchar(20)))
,rtrim( cast( SPECIMEN_DETAILS AS varchar(1000)))
,rtrim( cast( DANGER_CD AS varchar(20)))
,rtrim( cast( SPECIMEN_COLLECTION_VOL AS varchar(20)))
,rtrim( cast( SPECIMEN_COLLECTION_VOL_UNIT AS varchar(50)))
,rtrim( cast( SPECIMEN_DESC AS varchar(1000)))
,rtrim( cast( SPECIMEN_SITE_DESC AS varchar(100)))
,rtrim( cast( CLINICAL_INFORMATION AS varchar(1000)))
  ,[LAB_TEST_UID]
  ,[ROOT_ORDERED_TEST_PNTR]
  ,[PARENT_TEST_PNTR]
  ,[LAB_TEST_PNTR]
  ,[SPECIMEN_ADD_TIME]
  ,[SPECIMEN_LAST_CHANGE_TIME]
  ,[SPECIMEN_COLLECTION_DT]
,rtrim( cast( SPECIMEN_NM AS varchar(100)))
,rtrim( cast( ROOT_ORDERED_TEST_NM AS varchar(1000)))
,rtrim( cast( PARENT_TEST_NM AS varchar(1000)))
,rtrim( cast( TRANSCRIPTIONIST_NAME AS varchar(300)))
,rtrim( cast( TRANSCRIPTIONIST_ID AS varchar(100)))
,rtrim( cast( TRANSCRIPTIONIST_ASS_AUTH_CD AS varchar(199)))
,rtrim( cast( TRANSCRIPTIONIST_ASS_AUTH_TYPE AS varchar(100)))
,rtrim( cast( ASSISTANT_INTERPRETER_NAME AS varchar(300)))
,rtrim( cast( ASSISTANT_INTERPRETER_ID AS varchar(100)))
,rtrim( cast( ASSISTANT_INTER_ASS_AUTH_CD AS varchar(199)))
,rtrim( cast( ASSISTANT_INTER_ASS_AUTH_TYPE AS varchar(100)))
,rtrim( cast( RESULT_INTERPRETER_NAME AS varchar(300)))
,rtrim( cast( RECORD_STATUS_CD AS varchar(8)))
  ,GETDATE()
,rtrim( cast( CONDITION_CD AS varchar(20)))
,rtrim( cast( PROCESSING_DECISION_CD AS varchar(50)))
,rtrim( cast( PROCESSING_DECISION_DESC AS varchar(50)))
FROM [dbo].TMP_D_LAB_TEST_N
  ;


/*-------------------------------------------------------

Lab_Report_User_Comment Dimension

Note: Comments under the Order Test object (LAB214)
---------------------------------------------------------*/ 

create index idx_LAB_TEST_uid on dbo.TMP_D_LAB_TEST_N(LAB_TEST_uid);

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 50,'insert into LAB_TEST',(select count(1) from DBO.LAB_TEST with(nolock)));








drop table if exists dbo.TMP_Lab_Rpt_User_Comment;

CREATE TABLE dbo.[TMP_Lab_Rpt_User_Comment](
[LAB_COMMENT_id]  [int] IDENTITY(1,1) NOT NULL,
   [LAB_TEST_Key] [bigint]  NULL,
[LAB_TEST_uid] [bigint] NULL,
[COMMENTS_FOR_ELR_DT] [datetime] NULL,
[USER_COMMENT_CREATED_BY] [bigint] NULL,
[USER_RPT_COMMENTS] [varchar](8000) NULL,
[RECORD_STATUS_CD] [varchar](8) NOT NULL,
[observation_uid] [bigint] NOT NULL,
USER_COMMENT_KEY [bigint],
[RDB_LAST_REFRESH_TIME] [datetime] NULL
) ON [PRIMARY]
;


INSERT INTO dbo.TMP_Lab_Rpt_User_Comment
select distinct tdltn.LAB_TEST_Key,
tdltn.lab_rpt_uid as LAB_TEST_uid,
lab214.activity_to_time'COMMENTS_FOR_ELR_DT' ,
lab214.add_user_id'USER_COMMENT_CREATED_BY' ,
REPLACE(REPLACE(ovt.value_txt, CHAR(13), ' '), CHAR(10), ' ')'USER_RPT_COMMENTS',--TRANSLATE(ovt.value_txt,' ' ,'0D0A'x)'USER_RPT_COMMENTS' ,
tdltn.record_status_cd   'RECORD_STATUS_CD' ,
lab214.observation_uid,
NULL,
NULL
from dbo.TMP_D_LAB_TEST_N as tdltn,
nbs_odse..act_relationship as ar1,
nbs_odse..observation as obs,
nbs_odse..act_relationship as ar2,
nbs_odse..observation as lab214,
nbs_odse..obs_value_txt as ovt
where   ovt.value_txt is not null
and tdltn.LAB_TEST_uid = ar1.target_act_uid
and ar1.type_cd = 'APND'
and ar1.source_act_uid = obs.observation_uid
and obs.OBS_DOMAIN_CD_ST_1 ='C_Order'
and obs.observation_uid = ar2.target_act_uid
and ar2.source_act_uid = lab214.observation_uid
and ar2.type_cd = 'COMP'
and lab214.OBS_DOMAIN_CD_ST_1 ='C_Result'
and lab214.observation_uid = ovt.observation_uid
;

update dbo.TMP_Lab_Rpt_User_Comment
set  record_status_cd = 'ACTIVE'
 where  record_status_cd in ( '' ,'UNPROCESSED','PROCESSED' )
 ;

update dbo.TMP_Lab_Rpt_User_Comment
 set  record_status_cd = 'INACTIVE'
 where  record_status_cd = 'LOG_DEL' 
 ;

UPDATE dbo.TMP_Lab_Rpt_User_Comment 
 set USER_COMMENT_KEY= [LAB_COMMENT_id] + coalesce((SELECT MAX(USER_COMMENT_KEY) FROM RDB.dbo.Lab_Rpt_User_Comment),1)

delete from dbo.TMP_LAB_RPT_USER_COMMENT 
  where LAB_TEST_KEY= null;

UPDATE dbo.TMP_Lab_Rpt_User_Comment 
 set RDB_LAST_REFRESH_TIME=getdate();
   
   
UPDATE dbo.TMP_Lab_Rpt_User_Comment 
  set [USER_RPT_COMMENTS]= null
  where [USER_RPT_COMMENTS] = ''
  ;
   
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 51,' GENERATING TMP_Lab_Rpt_User_Comment ',(select count(1) from DBO.TMP_Lab_Rpt_User_Comment with(nolock)));








insert into dbo.Lab_Rpt_User_Comment
(
   [USER_COMMENT_KEY]
  ,[USER_RPT_COMMENTS]
  ,[COMMENTS_FOR_ELR_DT]
  ,[USER_COMMENT_CREATED_BY]
  ,[LAB_TEST_KEY]
  ,[RECORD_STATUS_CD]
  ,[LAB_TEST_UID]
  ,[RDB_LAST_REFRESH_TIME] 
  )
select [USER_COMMENT_KEY]
  ,rtrim( cast( [USER_RPT_COMMENTS] AS varchar(2000)))
  ,[COMMENTS_FOR_ELR_DT]
  ,[USER_COMMENT_CREATED_BY]
  ,[LAB_TEST_KEY]
  ,rtrim( cast( [RECORD_STATUS_CD] AS varchar(8)))
  ,[LAB_TEST_UID]
  ,[RDB_LAST_REFRESH_TIME]
  FROM [dbo].[TMP_LAB_RPT_USER_COMMENT]
  ;

  
INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 52,'INSERTING INTO Lab_Rpt_User_Comment',(select count(1) from DBO.Lab_Rpt_User_Comment with(nolock)));




/*
drop table if exists dbo.TMP_updated_observation_List;
drop table if exists dbo.TMP_updated_LAB_TEST_list;
drop table if exists dbo.TMP_updated_LAB_RPT_USER_COMMENT;
drop table if exists dbo.TMP_updt_Test_Result_Grouping_LIST ;
drop table if exists dbo.TMP_updt_Lab_Result_Val_list;
drop table if exists dbo.TMP_updated_LAB_TEST_result_list;
drop table if exists dbo.TMP_updT_Result_Comment_Grp_LIST;
drop table if exists dbo.TMP_updt_Lab_Result_Comment_list;
drop table if exists dbo.TMP_updated_LAB_TEST_list;
drop table if exists dbo.TMP_s_edx_document1;
drop table if exists dbo.TMP_merged_provider;
drop table if exists dbo.TMP_filter_participants ;
drop table if exists dbo.TMP_participants ;
drop table if exists dbo.TMP_LAB_TESTinit_a;
drop table if exists dbo.TMP_s_edx_document;
drop table if exists dbo.TMP_LAB_TESTinit;
drop table if exists dbo.TMP_LAB_TEST_mat_init;
drop table if exists dbo.TMP_OBS_REASON;
drop table if exists dbo.TMP_OBS_REASON_FINAL ;
drop table if exists dbo.TMP_LAB_TEST_oth;
drop table if exists dbo.TMP_LAB_TEST1_uid;
drop table if exists dbo.TMP_LAB_TEST1_TMP ;
drop table if exists dbo.TMP_LabReportMorb;
drop table if exists dbo.TMP_Morb_OID ;
drop table if exists dbo.TMP_LAB_TEST1_uid2;
drop table if exists dbo.TMP_LAB_TEST1 ;
drop table if exists dbo.TMP_R_Result_to_R_Order;
drop table if exists dbo.TMP_R_Result_to_R_Order_to_Order;
drop table if exists dbo.TMP_LAB_TEST1_testuid;
drop table if exists dbo.TMP_LAB_TEST1_final;
drop table if exists dbo.TMP_R_Order_to_Result;
drop table if exists dbo.TMP_LAB_TEST1_final_testuid;
drop table if exists dbo.TMP_LAB_TEST1_final_result;
drop table if exists dbo.TMP_Result_to_Order;
drop table if exists dbo.TMP_LAB_TEST1_final_orderuid;
drop table if exists dbo.TMP_LAB_TEST1_final_order;
drop table if exists dbo.TMP_LAB_TEST2 ;
drop table if exists dbo.TMP_LAB_TEST3;
drop table if exists dbo.TMP_LAB_TEST4 ;
drop table if exists dbo.TMP_order_test ;
drop table if exists dbo.TMP_Merge_Order ;
drop table if exists dbo.TMP_LAB_TEST_final_root_ordered_test_pntr;
drop table if exists dbo.TMP_L_LAB_TEST_N;
drop table if exists dbo.TMP_Lab_Rpt_User_Comment;
*/


INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'CASE_LAB_DATAMART','CASE_LAB_DATAMART','START', 1,'SP_START',0);
</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>0 seconds</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>false</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>false</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>NONE</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>10</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>true</value>
                            </entry>
                        </properties>
                        <retryCount>10</retryCount>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>Step7,8,9,10,11</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>failure</name>
                        <retry>false</retry>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                        <retry>false</retry>
                    </relationships>
                    <state>STOPPED</state>
                    <style>
                        <entry>
                            <key>background-color</key>
                            <value>#13ed5b</value>
                        </entry>
                    </style>
                    <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                </processors>
                <processors>
                    <id>b5211881-83cb-3b8f-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>872.0</x>
                        <y>1192.0</y>
                    </position>
                    <versionedComponentId>458dd9e5-c3bf-3f73-84b9-89aec98ce9ac</versionedComponentId>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.18.0</version>
                    </bundle>
                    <config>
                        <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Log Level</key>
<value>
    <name>Log Level</name>
</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>
    <name>Log Payload</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
<value>
    <name>Attributes to Log</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>
    <name>attributes-to-log-regex</name>
</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
<value>
    <name>Attributes to Ignore</name>
</value>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
<value>
    <name>attributes-to-ignore-regex</name>
</value>
                            </entry>
                            <entry>
<key>Log FlowFile Properties</key>
<value>
    <name>Log FlowFile Properties</name>
</value>
                            </entry>
                            <entry>
<key>Output Format</key>
<value>
    <name>Output Format</name>
</value>
                            </entry>
                            <entry>
<key>Log prefix</key>
<value>
    <name>Log prefix</name>
</value>
                            </entry>
                            <entry>
<key>character-set</key>
<value>
    <name>character-set</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <maxBackoffPeriod>10 mins</maxBackoffPeriod>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Log Level</key>
<value>info</value>
                            </entry>
                            <entry>
<key>Log Payload</key>
<value>false</value>
                            </entry>
                            <entry>
<key>Attributes to Log</key>
                            </entry>
                            <entry>
<key>attributes-to-log-regex</key>
<value>.*</value>
                            </entry>
                            <entry>
<key>Attributes to Ignore</key>
                            </entry>
                            <entry>
<key>attributes-to-ignore-regex</key>
                            </entry>
                            <entry>
<key>Log FlowFile Properties</key>
<value>true</value>
                            </entry>
                            <entry>
<key>Output Format</key>
<value>Line per Attribute</value>
                            </entry>
                            <entry>
<key>Log prefix</key>
                            </entry>
                            <entry>
<key>character-set</key>
<value>UTF-8</value>
                            </entry>
                        </properties>
                        <retryCount>10</retryCount>
                        <runDurationMillis>25</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>LogAttribute</name>
                    <relationships>
                        <autoTerminate>true</autoTerminate>
                        <name>success</name>
                        <retry>false</retry>
                    </relationships>
                    <state>STOPPED</state>
                    <style>
                        <entry>
                            <key>background-color</key>
                            <value>#e8e582</value>
                        </entry>
                    </style>
                    <type>org.apache.nifi.processors.standard.LogAttribute</type>
                </processors>
                <processors>
                    <id>c8c0c9b2-11ab-3171-0000-000000000000</id>
                    <parentGroupId>94a4db51-5024-387a-0000-000000000000</parentGroupId>
                    <position>
                        <x>256.0</x>
                        <y>496.0</y>
                    </position>
                    <versionedComponentId>63c7f51c-324d-3ee9-9503-4b90c7c6624b</versionedComponentId>
                    <bundle>
                        <artifact>nifi-standard-nar</artifact>
                        <group>org.apache.nifi</group>
                        <version>1.18.0</version>
                    </bundle>
                    <config>
                        <backoffMechanism>PENALIZE_FLOWFILE</backoffMechanism>
                        <bulletinLevel>WARN</bulletinLevel>
                        <comments></comments>
                        <concurrentlySchedulableTaskCount>1</concurrentlySchedulableTaskCount>
                        <descriptors>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>
    <identifiesControllerService>org.apache.nifi.dbcp.DBCPService</identifiesControllerService>
    <name>Database Connection Pooling Service</name>
</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
<value>
    <name>sql-pre-query</name>
</value>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>
    <name>SQL select query</name>
</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
<value>
    <name>sql-post-query</name>
</value>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>
    <name>Max Wait Time</name>
</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>
    <name>dbf-normalize</name>
</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>
    <name>dbf-user-logical-types</name>
</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>
    <name>compression-format</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>
    <name>dbf-default-precision</name>
</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>
    <name>dbf-default-scale</name>
</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>
    <name>esql-max-rows</name>
</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>
    <name>esql-output-batch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>
    <name>esql-fetch-size</name>
</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>
    <name>esql-auto-commit</name>
</value>
                            </entry>
                        </descriptors>
                        <executionNode>ALL</executionNode>
                        <lossTolerant>false</lossTolerant>
                        <maxBackoffPeriod>10 mins</maxBackoffPeriod>
                        <penaltyDuration>30 sec</penaltyDuration>
                        <properties>
                            <entry>
<key>Database Connection Pooling Service</key>
<value>97d7b5ba-44fb-398d-0000-000000000000</value>
                            </entry>
                            <entry>
<key>sql-pre-query</key>
                            </entry>
                            <entry>
<key>SQL select query</key>
<value>drop table if exists dbo.TMP_LAB_TEST_oth;

select 
obs.observation_uid as LAB_TEST_uid_oth,
oin.interpretation_cd as interpretation_flg, 
ai.root_extension_txt  as ACCESSION_NBR, 
(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(obs.REASON_FOR_TEST_DESC,
  '&amp;#x09;', CHAR(9)),
  '&amp;#x0A;', CHAR(10)),
  '&amp;#x0D;', CHAR(13)),
  '&amp;#x20;', CHAR(32)),
  '&amp;amp;', CHAR(38)),
  '&amp;lt;', CHAR(60)),
  '&amp;gt;', CHAR(62))) REASON_FOR_TEST_DESC,
obs.REASON_FOR_TEST_CD,
rtrim(par1.provider_first_name)+' '+rtrim(par1.provider_last_name) as transcriptionist_name,
par1.person_id_assign_auth_cd as transcriptionist_ass_auth_cd,
par1.person_id_type_desc  as Transcriptionist_Ass_Auth_Type,
par1.person_id_val  as transcriptionist_id,
rtrim(par2.provider_first_name)+' '+rtrim(par2.provider_last_name) as Assistant_Interpreter_Name,
par2.person_id_assign_auth_cd  as Assistant_inter_ass_auth_cd,
par2.person_id_type_desc  as Assistant_inter_ass_auth_type,
par2.person_id_val  as Assistant_interpreter_id,
rtrim(par3.provider_first_name)+' '+rtrim(par3.provider_last_name) as result_interpreter_name
into dbo.TMP_LAB_TEST_oth
from dbo.TMP_OBS_REASON_FINAL obs 
left join nbs_odse..act_id  as ai on obs.observation_uid = ai.ACT_UID   and ai.type_cd='FN'
left join nbs_odse..observation_interp as oin on obs.observation_uid = oin.observation_uid and oin.INTERPRETATION_CD &lt;&gt; ' '
/*get transcriptionist*/
left join dbo.TMP_participants as par1 on obs.observation_uid = par1.act_uid and par1.type_cd = 'ENT'
/*get assistant_interpreter*/
left join  dbo.TMP_participants as par2 on obs.observation_uid= par2.act_uid    and par2.type_cd = 'ASS'
/*get result_interpreter*/
left join dbo.TMP_participants as par3 on obs.observation_uid= par3.act_uid    and par3.type_cd = 'VRF'
--order by obs.OBSERVATION_UID
;

INSERT INTO DBO.JOB_FLOW_LOG (BATCH_ID,DATAFLOW_NAME,PACKAGE_NAME,STATUS_TYPE,STEP_NUMBER,STEP_NAME,ROW_COUNT) VALUES(001,'D_LABTEST','D_LABTEST','START', 22,' GENERATING TMP_LAB_TEST_oth ',(select count(1) from DBO.TMP_LAB_TEST_oth with(nolock)));
</value>
                            </entry>
                            <entry>
<key>sql-post-query</key>
                            </entry>
                            <entry>
<key>Max Wait Time</key>
<value>0 seconds</value>
                            </entry>
                            <entry>
<key>dbf-normalize</key>
<value>false</value>
                            </entry>
                            <entry>
<key>dbf-user-logical-types</key>
<value>false</value>
                            </entry>
                            <entry>
<key>compression-format</key>
<value>NONE</value>
                            </entry>
                            <entry>
<key>dbf-default-precision</key>
<value>10</value>
                            </entry>
                            <entry>
<key>dbf-default-scale</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-max-rows</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-output-batch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-fetch-size</key>
<value>0</value>
                            </entry>
                            <entry>
<key>esql-auto-commit</key>
<value>true</value>
                            </entry>
                        </properties>
                        <retryCount>10</retryCount>
                        <runDurationMillis>0</runDurationMillis>
                        <schedulingPeriod>0 sec</schedulingPeriod>
                        <schedulingStrategy>TIMER_DRIVEN</schedulingStrategy>
                        <yieldDuration>1 sec</yieldDuration>
                    </config>
                    <executionNodeRestricted>false</executionNodeRestricted>
                    <name>Step5</name>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>failure</name>
                        <retry>false</retry>
                    </relationships>
                    <relationships>
                        <autoTerminate>false</autoTerminate>
                        <name>success</name>
                        <retry>false</retry>
                    </relationships>
                    <state>STOPPED</state>
                    <style>
                        <entry>
                            <key>background-color</key>
                            <value>#12e812</value>
                        </entry>
                    </style>
                    <type>org.apache.nifi.processors.standard.ExecuteSQL</type>
                </processors>
            </contents>
            <defaultBackPressureDataSizeThreshold>1 GB</defaultBackPressureDataSizeThreshold>
            <defaultBackPressureObjectThreshold>10000</defaultBackPressureObjectThreshold>
            <defaultFlowFileExpiration>0 sec</defaultFlowFileExpiration>
            <flowfileConcurrency>UNBOUNDED</flowfileConcurrency>
            <flowfileOutboundPolicy>STREAM_WHEN_AVAILABLE</flowfileOutboundPolicy>
            <name>sp_D_LAB_TEST</name>
            <variables/>
        </processGroups>
    </snippet>
    <timestamp>08/15/2023 13:51:34 EDT</timestamp>
</template>
